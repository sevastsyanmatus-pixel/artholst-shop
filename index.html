<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ARTHOLST - –ö–∞—Ä—Ç–∏–Ω—ã –Ω–∞ —Ö–æ–ª—Å—Ç–µ</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-dark: #0D0D0D;
            --bg-medium: #1A1A1A;
            --bg-light: #2D2D2D;
            --bg-card: #252525;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --text-muted: #707070;
            --color-primary: #FF6B35;
            --color-secondary: #7C3AED;
            --color-accent: #F59E0B;
            --color-orange-light: #FF8C42;
            --color-purple-light: #A855F7;
            --gradient-primary: linear-gradient(135deg, #FF6B35 0%, #FF8C42 50%, #7C3AED 100%);
            --gradient-orange: linear-gradient(135deg, #FF6B35 0%, #FF8C42 100%);
            --gradient-purple: linear-gradient(135deg, #7C3AED 0%, #A855F7 100%);
            --gradient-warm: linear-gradient(135deg, #F59E0B 0%, #FF6B35 100%);
            --color-error: #EF4444;
            --color-success: #10B981;
            --shadow-card: 0 4px 20px rgba(0, 0, 0, 0.3);
            --shadow-button: 0 4px 20px rgba(255, 107, 53, 0.4);
            --shadow-glow: 0 0 30px rgba(255, 107, 53, 0.3);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-fast: all 0.15s ease;
        }

        /* ===== SPLASH SCREEN ===== */
        .splash {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: var(--bg-dark); z-index: 9999;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: opacity 0.6s ease, transform 0.6s ease;
            overflow: hidden;
        }
        .splash.hide { opacity: 0; transform: scale(1.1); pointer-events: none; }
        .splash-stage {
            position: relative; width: 220px; height: 220px;
            display: flex; align-items: center; justify-content: center;
            margin-bottom: 32px;
        }
        .splash-glow {
            position: absolute; width: 300px; height: 300px; border-radius: 50%;
            background: radial-gradient(circle, rgba(255,107,53,0.3) 0%, transparent 70%);
            filter: blur(40px); pointer-events: none;
            top: 50%; left: 50%; transform: translate(-50%, -50%);
            opacity: 0; transition: opacity 0.6s ease;
        }
        .splash-glow.show { opacity: 1; }
        .splash-gift {
            position: absolute; z-index: 3;
            top: 50%; left: 50%; transform: translate(-50%, -50%);
            opacity: 0;
            animation: splashGiftAppear 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s forwards;
        }
        .splash-gift.shake {
            animation: splashGiftShake 1s cubic-bezier(0.36, 0.07, 0.19, 0.97) forwards;
        }
        .splash-gift-body {
            width: 120px; height: 100px;
            background: linear-gradient(145deg, #FF6B35 0%, #FF8C42 100%);
            border-radius: 4px 4px 14px 14px;
            position: relative; overflow: hidden;
            box-shadow: 0 8px 35px rgba(255,107,53,0.5), inset 0 -5px 12px rgba(0,0,0,0.15);
        }
        .splash-gift-ribbon-v {
            position: absolute; top: 0; bottom: 0;
            left: 50%; transform: translateX(-50%); width: 18px;
            background: linear-gradient(180deg, #FFD700, #F59E0B);
        }
        .splash-gift-ribbon-h {
            position: absolute; left: 0; right: 0;
            top: 50%; transform: translateY(-50%); height: 18px;
            background: linear-gradient(90deg, #FFD700, #F59E0B);
        }
        .splash-gift-lid {
            width: 134px; height: 26px;
            background: linear-gradient(145deg, #FF7A45 0%, #FF9855 100%);
            border-radius: 8px 8px 2px 2px;
            margin: 0 auto -2px; position: relative;
            box-shadow: 0 -2px 15px rgba(255,107,53,0.3);
            z-index: 4;
        }
        .splash-gift-lid-ribbon {
            position: absolute; top: 0; bottom: 0;
            left: 50%; transform: translateX(-50%); width: 18px;
            background: linear-gradient(180deg, #FFD700, #F59E0B);
        }
        .splash-gift-bow {
            position: absolute; top: -20px;
            left: 50%; transform: translateX(-50%);
            font-size: 28px; line-height: 1;
            filter: drop-shadow(0 2px 8px rgba(245,158,11,0.6));
        }
        .splash-fragment {
            position: absolute; z-index: 10; pointer-events: none;
            border-radius: 4px; box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        .splash-confetti {
            position: absolute; pointer-events: none; z-index: 8;
        }
        .splash-shockwave {
            position: absolute; top: 50%; left: 50%;
            width: 20px; height: 20px; border-radius: 50%;
            transform: translate(-50%, -50%) scale(0);
            border: 3px solid rgba(255,107,53,0.5);
            pointer-events: none; z-index: 7; opacity: 0;
        }
        .splash-shockwave.active {
            animation: splashShockwave 0.7s ease-out forwards;
        }
        .splash-painting {
            position: absolute; z-index: 5;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%) scale(0);
            opacity: 0;
            transition: all 0.7s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .splash-painting.reveal {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1) rotate(-2deg);
        }
        .splash-painting-frame {
            width: 100px; height: 130px;
            background: linear-gradient(135deg, var(--bg-light), var(--bg-medium));
            border: 5px solid var(--color-primary);
            border-radius: 8px;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 15px 50px rgba(0,0,0,0.6), 0 0 40px rgba(255,107,53,0.4);
            overflow: hidden;
        }
        .splash-painting-art {
            width: 100%; height: 100%;
            background: linear-gradient(135deg, #7C3AED 0%, #FF6B35 40%, #F59E0B 100%);
            background-size: 200% 200%;
            animation: splashArtShimmer 2s ease infinite;
            display: flex; align-items: center; justify-content: center;
            font-size: 40px;
        }
        .splash-logo {
            font-family: 'Nunito', sans-serif; font-size: 40px; font-weight: 900;
            letter-spacing: 4px;
            opacity: 0; transform: translateY(20px);
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .splash-logo.show { opacity: 1; transform: translateY(0); }
        .splash-logo-text {
            background: var(--gradient-primary); background-size: 200% 200%;
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
            animation: splashGradient 3s ease infinite;
        }
        .splash-tagline {
            font-family: 'Nunito', sans-serif; font-size: 13px; font-weight: 700;
            color: var(--text-muted); letter-spacing: 3px; text-transform: uppercase;
            opacity: 0; transform: translateY(15px); margin-top: 10px;
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1) 0.15s;
        }
        .splash-tagline.show { opacity: 1; transform: translateY(0); }

        @keyframes splashGiftAppear {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.2); }
            60% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
            100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }
        @keyframes splashGiftShake {
            0%, 100% { transform: translate(-50%, -50%) rotate(0deg) scale(1); }
            5% { transform: translate(-50%, -50%) rotate(-3deg) scale(1.02); }
            10% { transform: translate(-50%, -50%) rotate(3deg) scale(1.02); }
            15% { transform: translate(-50%, -50%) rotate(-5deg) scale(1.04); }
            20% { transform: translate(-50%, -50%) rotate(5deg) scale(1.04); }
            25% { transform: translate(-50%, -50%) rotate(-8deg) scale(1.07); }
            30% { transform: translate(-50%, -50%) rotate(8deg) scale(1.07); }
            35% { transform: translate(-50%, -50%) rotate(-11deg) scale(1.1); }
            40% { transform: translate(-50%, -50%) rotate(11deg) scale(1.1); }
            45% { transform: translate(-50%, -50%) rotate(-14deg) scale(1.13); }
            50% { transform: translate(-50%, -50%) rotate(14deg) scale(1.13); }
            55% { transform: translate(-50%, -50%) rotate(-16deg) scale(1.15); }
            60% { transform: translate(-50%, -50%) rotate(16deg) scale(1.15); }
            65% { transform: translate(-50%, -50%) rotate(-18deg) scale(1.17); }
            70% { transform: translate(-50%, -50%) rotate(18deg) scale(1.17); }
            78% { transform: translate(-50%, -50%) rotate(-14deg) scale(1.13); }
            86% { transform: translate(-50%, -50%) rotate(10deg) scale(1.08); }
            93% { transform: translate(-50%, -50%) rotate(-5deg) scale(1.03); }
        }
        @keyframes splashShockwave {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(18); opacity: 0; }
        }
        @keyframes splashArtShimmer {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        @keyframes splashGradient {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

                * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Nunito', system-ui, -apple-system, sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.5;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        .page { display: none; min-height: 100vh; padding-bottom: 120px; background: var(--bg-dark); }
        .page.active { display: block; animation: fadeIn 0.3s ease; }

        /* ===== HEADER ===== */
        .header {
            position: sticky; top: 0; background: var(--bg-medium);
            padding: 12px 16px; display: flex; justify-content: space-between;
            align-items: center; z-index: 100; border-bottom: 1px solid var(--bg-light);
        }
        .logo {
            font-size: 26px; font-weight: 900; letter-spacing: 2px;
            background: var(--gradient-primary);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
        }
        .header-right { display: flex; align-items: center; gap: 10px; }
        .manager-btn {
            display: flex; align-items: center; gap: 6px; padding: 10px 14px;
            background: var(--gradient-purple); color: white; border-radius: 24px;
            font-size: 13px; font-weight: 700; text-decoration: none;
            transition: var(--transition); box-shadow: 0 4px 15px rgba(124, 58, 237, 0.4);
        }
        .manager-btn:active { transform: scale(0.95); }
        .cart-icon {
            position: relative; width: 48px; height: 48px;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; border-radius: 50%; background: var(--gradient-orange);
            transition: var(--transition); box-shadow: var(--shadow-button);
        }
        .cart-icon:active { transform: scale(0.9); }
        .cart-icon svg { width: 22px; height: 22px; stroke: white; }
        .cart-badge {
            position: absolute; top: -4px; right: -4px;
            background: var(--color-secondary); color: white;
            font-size: 11px; font-weight: 800; min-width: 22px; height: 22px;
            border-radius: 11px; display: flex; align-items: center; justify-content: center;
            border: 2px solid var(--bg-medium); animation: bounce 0.3s ease;
        }
        .cart-badge.hidden { display: none; }
        .page-header {
            display: flex; align-items: center; padding: 12px 16px; gap: 12px;
            background: var(--bg-medium); position: sticky; top: 0; z-index: 100;
            border-bottom: 1px solid var(--bg-light);
        }
        .back-button {
            width: 44px; height: 44px; display: flex; align-items: center; justify-content: center;
            cursor: pointer; border-radius: 50%; background: var(--bg-light); transition: var(--transition);
        }
        .back-button svg { stroke: var(--text-primary); }
        .back-button:active { background: var(--color-primary); transform: scale(0.9); }
        .page-title { flex: 1; font-size: 20px; font-weight: 800; }
        .clear-cart { color: var(--color-primary); font-size: 14px; font-weight: 700; cursor: pointer; padding: 8px; }

        /* ===== HERO ===== */
        .hero { padding: 16px; text-align: center; background: var(--bg-medium); }
        .hero-line { width: 80px; height: 4px; background: var(--gradient-primary); margin: 0 auto 16px; border-radius: 2px; }
        .hero-instagram {
            display: inline-flex; align-items: center; gap: 8px;
            color: var(--text-primary); font-weight: 700; text-decoration: none; font-size: 14px;
            padding: 10px 20px; background: var(--bg-light); border-radius: 24px;
            transition: var(--transition); border: 1px solid var(--bg-card);
        }
        .hero-instagram:active { transform: scale(0.95); background: var(--color-secondary); }

        /* ===== –ë–ê–ù–ù–ï–†–´ ===== */
        .banners-section { padding: 16px; }
        .banners-slider { overflow: hidden; border-radius: 24px; position: relative; box-shadow: var(--shadow-card); }
        .banners-track { display: flex; transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        .banner {
            min-width: 100%; padding: 28px 24px; border-radius: 24px;
            color: white; text-align: left; position: relative; overflow: hidden; cursor: pointer;
        }
        .banner::before {
            content: ''; position: absolute; top: -60px; right: -60px;
            width: 180px; height: 180px; background: rgba(255,255,255,0.1); border-radius: 50%;
        }
        .banner::after {
            content: ''; position: absolute; bottom: -40px; right: 40px;
            width: 100px; height: 100px; background: rgba(255,255,255,0.08); border-radius: 50%;
        }
        .banner-emoji { font-size: 52px; margin-bottom: 12px; display: block; }
        .banner-title { font-size: 24px; font-weight: 900; margin-bottom: 6px; position: relative; z-index: 1; }
        .banner-subtitle { font-size: 15px; opacity: 0.9; font-weight: 600; position: relative; z-index: 1; }
        .banner-tap { position: absolute; bottom: 12px; right: 16px; font-size: 12px; opacity: 0.7; font-weight: 600; }
        .banners-dots { display: flex; justify-content: center; gap: 8px; margin-top: 16px; }
        .banner-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--bg-light); cursor: pointer; transition: var(--transition); }
        .banner-dot.active { background: var(--color-primary); width: 28px; border-radius: 4px; box-shadow: var(--shadow-glow); }

        /* ===== –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê ===== */
        .promo-section { padding: 0 16px 24px; }
        .promo-title { font-size: 20px; font-weight: 900; margin-bottom: 16px; text-align: center; }
        .promo-cards { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        .promo-card {
            padding: 16px 12px; background: var(--bg-card); border-radius: 16px;
            text-align: center; transition: var(--transition);
            border: 1px solid var(--bg-light); cursor: pointer;
        }
        .promo-card:active { transform: scale(0.97); border-color: var(--color-primary); }
        .promo-icon { font-size: 32px; margin-bottom: 8px; display: block; }
        .promo-card-title { font-size: 12px; font-weight: 700; color: var(--text-secondary); line-height: 1.4; }

        /* ===== –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û ===== */
        .modal-overlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.85); display: none;
            align-items: center; justify-content: center;
            z-index: 1000; padding: 20px; backdrop-filter: blur(8px);
        }
        .modal-overlay.active { display: flex; animation: fadeIn 0.2s ease; }
        .modal {
            background: var(--bg-card); border-radius: 24px; padding: 28px 24px;
            max-width: 360px; width: 100%; position: relative;
            animation: slideUp 0.3s ease; border: 1px solid var(--bg-light);
            max-height: 85vh; overflow-y: auto;
        }
        .modal::-webkit-scrollbar { width: 0; }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .modal-close {
            position: sticky; top: 0; float: right;
            width: 36px; height: 36px; background: var(--bg-light);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: var(--transition); z-index: 2;
        }
        .modal-close:active { background: var(--color-primary); }
        .modal-close svg { width: 16px; height: 16px; stroke: var(--text-secondary); stroke-width: 2.5; }
        .modal-emoji { font-size: 56px; text-align: center; margin-bottom: 16px; clear: both; }
        .modal-title { font-size: 20px; font-weight: 900; text-align: center; margin-bottom: 12px; }
        .modal-text {
            font-size: 14px; color: var(--text-secondary); text-align: left;
            line-height: 1.8; margin-bottom: 20px; white-space: pre-line;
        }
        .modal-promo-code {
            background: var(--bg-light); border: 2px dashed var(--color-primary);
            border-radius: 14px; padding: 16px; text-align: center; margin-bottom: 16px;
        }
        .modal-promo-label { font-size: 12px; color: var(--text-muted); margin-bottom: 6px; font-weight: 600; }
        .modal-promo-value { font-size: 24px; font-weight: 900; color: var(--color-primary); letter-spacing: 3px; }
        .modal-btn {
            width: 100%; padding: 16px; background: var(--gradient-orange);
            color: white; border: none; border-radius: 14px;
            font-size: 16px; font-weight: 800; cursor: pointer;
            font-family: 'Nunito', sans-serif; box-shadow: var(--shadow-button);
            transition: var(--transition);
        }
        .modal-btn:active { transform: scale(0.98); }
        .modal-btn-secondary {
            width: 100%; padding: 14px; background: transparent;
            color: var(--text-secondary); border: 2px solid var(--bg-light);
            border-radius: 14px; font-size: 15px; font-weight: 700; cursor: pointer;
            font-family: 'Nunito', sans-serif; margin-top: 10px; transition: var(--transition);
        }
        .modal-btn-secondary:active { background: var(--bg-light); }
        .modal-btn.copied { background: var(--color-success) !important; box-shadow: 0 4px 20px rgba(16, 185, 129, 0.4) !important; }
        .modal-buttons { display: flex; flex-direction: column; gap: 0; }

        /* –î–µ—Ç–∞–ª–∏ —Ä–∞–∑–º–µ—Ä–∞ –≤ –º–æ–¥–∞–ª–∫–µ */
        .size-modal-details {
            background: var(--bg-light); border-radius: 16px; padding: 4px 0; margin-bottom: 16px;
        }
        .size-modal-row {
            display: flex; justify-content: space-between; align-items: center;
            padding: 12px 16px; border-bottom: 1px solid rgba(255,255,255,0.04);
        }
        .size-modal-row:last-child { border-bottom: none; }
        .size-modal-row-label { font-size: 14px; font-weight: 600; color: var(--text-secondary); display: flex; align-items: center; gap: 8px; }
        .size-modal-row-value { font-size: 15px; font-weight: 800; color: var(--text-primary); }
        .size-modal-row-value.price {
            background: var(--gradient-primary);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
            font-size: 18px;
        }
        .size-modal-features { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 20px; }
        .size-modal-feature {
            padding: 8px 12px; background: var(--bg-light); border-radius: 10px;
            font-size: 12px; font-weight: 700; color: var(--text-secondary);
            border: 1px solid rgba(255,255,255,0.04);
        }

        /* ===== –ö–ê–¢–ê–õ–û–ì ===== */
        .section-header { text-align: center; margin-bottom: 20px; padding: 0 16px; }
        .section-title { font-size: 24px; font-weight: 900; margin-bottom: 10px; }
        .section-line { width: 50px; height: 4px; background: var(--gradient-primary); margin: 0 auto; border-radius: 2px; }
        .sizes-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; padding: 0 16px; margin-bottom: 32px; }
        .size-card {
            background: var(--bg-card); border-radius: 20px; padding: 16px;
            position: relative; transition: var(--transition);
            animation: fadeInUp 0.5s ease forwards; opacity: 0;
            border: 1px solid var(--bg-light); cursor: pointer;
        }
        .size-card:active { transform: scale(0.98); border-color: var(--color-primary); }
        .size-badge {
            position: absolute; top: -10px; right: 12px; padding: 5px 12px;
            border-radius: 12px; font-size: 10px; font-weight: 800;
            color: white; z-index: 1; text-transform: uppercase;
        }
        .size-badge.hit { background: var(--gradient-orange); box-shadow: 0 4px 12px rgba(255, 107, 53, 0.4); }
        .size-badge.popular { background: var(--gradient-purple); box-shadow: 0 4px 12px rgba(124, 58, 237, 0.4); }
        /* –°—Ç–∏–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ info */
        .size-info-btn {
            position: absolute; top: 10px; left: 10px;
            width: 28px; height: 28px; border-radius: 8px;
            background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.08);
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; z-index: 2; transition: var(--transition);
        }
        .size-info-btn:active { background: rgba(255,255,255,0.15); }
        .size-info-btn svg { width: 14px; height: 14px; stroke: var(--text-muted); stroke-width: 2.5; fill: none; }
        .size-preview {
            width: 100%; height: 90px; display: flex; align-items: center;
            justify-content: center; margin-bottom: 12px;
        }
        .size-preview-frame {
            display: flex; align-items: center; justify-content: center;
            background: linear-gradient(135deg, var(--bg-light) 0%, var(--bg-medium) 100%);
            border-radius: 8px; border: 3px solid var(--color-primary);
            box-shadow: inset 0 0 20px rgba(255, 107, 53, 0.1), 0 4px 15px rgba(0,0,0,0.3);
        }
        .size-preview-image { font-size: 28px; }
        .size-dimensions { font-size: 18px; font-weight: 800; text-align: center; margin-bottom: 4px; }
        .size-price {
            font-size: 28px; font-weight: 900; text-align: center;
            background: var(--gradient-primary);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
            margin-bottom: 6px;
        }
        .size-info { font-size: 11px; color: var(--text-muted); text-align: center; margin-bottom: 14px; font-weight: 600; }
        .add-to-cart-btn {
            width: 100%; padding: 14px; background: var(--gradient-orange);
            color: white; border: none; border-radius: 14px;
            font-size: 14px; font-weight: 800; cursor: pointer;
            transition: var(--transition-fast); box-shadow: var(--shadow-button);
            font-family: 'Nunito', sans-serif; position: relative; z-index: 3;
        }
        .add-to-cart-btn:active { transform: scale(0.95); }
        .add-to-cart-btn.added { background: var(--color-success); box-shadow: 0 4px 20px rgba(16, 185, 129, 0.4); }
        .add-to-cart-btn.pulse-effect { animation: buttonPulse 0.4s ease; }
        @keyframes buttonPulse { 0% { transform: scale(1); } 30% { transform: scale(0.9); } 60% { transform: scale(1.05); } 100% { transform: scale(1); } }
        .flying-item { position: fixed; z-index: 9999; pointer-events: none; font-size: 36px; filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3)); }

        /* ===== –ü–†–ò–ú–ï–†–´ ===== */
        .examples-section { padding: 0 16px; margin-bottom: 24px; }
        .examples-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; }
        .example-card {
            background: var(--bg-card); border-radius: 18px; padding: 24px;
            text-align: center; transition: var(--transition); border: 1px solid var(--bg-light);
        }
        .example-card:active { transform: scale(0.97); border-color: var(--color-secondary); }
        .example-icon { font-size: 40px; margin-bottom: 10px; }
        .example-category { font-size: 15px; font-weight: 800; margin-bottom: 4px; }
        .example-size { font-size: 13px; color: var(--text-muted); font-weight: 600; }
        .examples-instagram { text-align: center; font-size: 13px; color: var(--text-secondary); margin-top: 20px; font-weight: 600; }
        .examples-instagram a { color: var(--color-primary); font-weight: 700; text-decoration: none; }

        /* ===== FOOTER ===== */
        .footer { background: var(--bg-medium); padding: 32px 16px; text-align: center; border-top: 1px solid var(--bg-light); }
        .footer-logo { font-size: 26px; font-weight: 900; letter-spacing: 2px; margin-bottom: 14px; background: var(--gradient-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .footer-instagram { color: var(--color-primary); text-decoration: none; font-size: 15px; font-weight: 700; }
        .footer-text { font-size: 12px; color: var(--text-muted); margin-top: 16px; }

        /* ===== –ö–û–†–ó–ò–ù–ê ===== */
        .cart-empty { text-align: center; padding: 80px 20px; }
        .cart-empty-icon { font-size: 80px; margin-bottom: 20px; }
        .cart-empty-text { font-size: 22px; font-weight: 800; margin-bottom: 8px; }
        .cart-empty-subtext { font-size: 15px; color: var(--text-secondary); margin-bottom: 28px; }
        .cart-items { padding: 16px; padding-bottom: 240px; }
        .cart-item {
            background: var(--bg-card); border-radius: 20px; padding: 18px;
            margin-bottom: 12px; position: relative; animation: fadeInUp 0.3s ease;
            border: 1px solid var(--bg-light);
        }
        .cart-item-header { display: flex; gap: 14px; margin-bottom: 14px; }
        .cart-item-preview {
            width: 75px; height: 75px; background: var(--bg-light);
            border-radius: 14px; display: flex; align-items: center; justify-content: center;
            border: 2px solid var(--color-primary);
        }
        .cart-item-preview span { font-size: 32px; }
        .cart-item-info { flex: 1; }
        .cart-item-size { font-size: 18px; font-weight: 800; margin-bottom: 4px; }
        .cart-item-price { font-size: 24px; font-weight: 900; background: var(--gradient-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .cart-item-delete {
            position: absolute; top: 14px; right: 14px; width: 38px; height: 38px;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; border-radius: 50%; background: var(--bg-light); transition: var(--transition);
        }
        .cart-item-delete svg { stroke: var(--text-secondary); }
        .cart-item-delete:active { background: var(--color-error); }
        .cart-item-delete:active svg { stroke: white; }
        .packaging-toggle {
            display: flex; align-items: center; justify-content: space-between;
            padding: 16px; background: var(--bg-light); border-radius: 14px;
            margin-bottom: 14px; cursor: pointer;
        }
        .packaging-label { font-size: 15px; font-weight: 700; }
        .packaging-price { font-size: 13px; color: var(--text-secondary); font-weight: 600; }
        .toggle-switch { width: 54px; height: 30px; background: var(--bg-medium); border-radius: 15px; position: relative; transition: var(--transition); }
        .toggle-switch.active { background: var(--gradient-orange); }
        .toggle-switch::after {
            content: ''; position: absolute; width: 26px; height: 26px;
            background: white; border-radius: 50%; top: 2px; left: 2px;
            transition: var(--transition); box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }
        .toggle-switch.active::after { left: 26px; }
        .cart-item-comment {
            width: 100%; padding: 14px; background: var(--bg-light);
            border: 2px solid var(--bg-medium); border-radius: 14px;
            font-size: 14px; font-family: 'Nunito', sans-serif; resize: none;
            height: 75px; transition: var(--transition); color: var(--text-primary);
        }
        .cart-item-comment::placeholder { color: var(--text-muted); }
        .cart-item-comment:focus { outline: none; border-color: var(--color-primary); }
        .cart-item-photo-note { font-size: 13px; color: var(--text-secondary); margin-top: 10px; font-weight: 600; }
        .promo-section-cart { background: var(--bg-card); border-radius: 20px; padding: 18px; margin: 0 0 16px; border: 1px solid var(--bg-light); }
        .promo-input-wrapper { display: flex; gap: 10px; }
        .promo-input {
            flex: 1; padding: 14px 16px; background: var(--bg-light);
            border: 2px solid var(--bg-medium); border-radius: 12px;
            font-size: 15px; font-family: 'Nunito', sans-serif; font-weight: 700;
            text-transform: uppercase; color: var(--text-primary);
        }
        .promo-input::placeholder { color: var(--text-muted); }
        .promo-input:focus { outline: none; border-color: var(--color-secondary); }
        .promo-apply-btn {
            padding: 14px 24px; background: var(--gradient-purple);
            color: white; border: none; border-radius: 12px;
            font-size: 15px; font-weight: 800; cursor: pointer;
            font-family: 'Nunito', sans-serif; box-shadow: 0 4px 15px rgba(124, 58, 237, 0.4);
        }
        .promo-message { margin-top: 12px; font-size: 13px; font-weight: 600; color: var(--text-secondary); }
        .promo-message.success { color: var(--color-success); }
        .promo-message.error { color: var(--color-error); }
        .add-more-btn {
            width: 100%; padding: 18px; background: transparent;
            border: 2px dashed var(--color-primary); border-radius: 16px;
            font-size: 15px; font-weight: 700; color: var(--color-primary);
            cursor: pointer; margin-top: 10px; margin-bottom: 16px;
            transition: var(--transition); font-family: 'Nunito', sans-serif;
        }
        .add-more-btn:active { background: rgba(255, 107, 53, 0.1); }
        .cart-summary {
            position: fixed; bottom: 0; left: 0; right: 0;
            background: var(--bg-medium); padding: 18px 16px 24px;
            z-index: 100; border-radius: 28px 28px 0 0;
            box-shadow: 0 -8px 30px rgba(0,0,0,0.5); border-top: 1px solid var(--bg-light);
        }
        .cart-summary-row { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 14px; font-weight: 600; color: var(--text-secondary); }
        .cart-summary-row span:last-child { color: var(--text-primary); }
        .cart-summary-row.discount { color: var(--color-success); }
        .cart-summary-row.discount span:last-child { color: var(--color-success); }
        .cart-summary-total { display: flex; justify-content: space-between; margin-bottom: 14px; font-size: 24px; font-weight: 900; }
        .checkout-btn {
            width: 100%; padding: 18px; background: var(--gradient-orange); color: white; border: none;
            border-radius: 16px; font-size: 17px; font-weight: 800; cursor: pointer;
            transition: var(--transition); box-shadow: var(--shadow-button); font-family: 'Nunito', sans-serif;
        }
        .checkout-btn:active { transform: scale(0.98); }

        /* ===== –û–§–û–†–ú–õ–ï–ù–ò–ï ===== */
        .checkout-content { padding: 16px; }
        .progress-bar { display: flex; align-items: center; justify-content: center; gap: 8px; margin-bottom: 28px; }
        .progress-step {
            width: 40px; height: 40px; border-radius: 50%; background: var(--bg-light);
            display: flex; align-items: center; justify-content: center;
            font-size: 15px; font-weight: 800; color: var(--text-secondary); transition: var(--transition);
        }
        .progress-step.active { background: var(--gradient-orange); color: white; box-shadow: var(--shadow-button); }
        .progress-step.completed { background: var(--color-success); color: white; }
        .progress-line { width: 50px; height: 4px; background: var(--bg-light); border-radius: 2px; transition: var(--transition); }
        .progress-line.active { background: var(--color-success); }
        .checkout-step { display: none; animation: fadeInUp 0.3s ease; }
        .checkout-step.active { display: block; }
        .step-title { font-size: 24px; font-weight: 900; margin-bottom: 24px; text-align: center; }
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; font-size: 12px; color: var(--text-muted); margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px; font-weight: 700; }
        .form-label .req { color: var(--color-error); }
        .form-input {
            width: 100%; padding: 16px; background: var(--bg-card);
            border: 2px solid var(--bg-light); border-radius: 14px;
            font-size: 16px; font-family: 'Nunito', sans-serif; font-weight: 600;
            transition: var(--transition); color: var(--text-primary);
        }
        .form-input::placeholder { color: var(--text-muted); }
        .form-input:focus { outline: none; border-color: var(--color-primary); }
        .form-input.error { border-color: var(--color-error); animation: shake 0.4s ease; }
        .form-input.valid { border-color: var(--color-success); }
        .form-error { font-size: 12px; color: var(--color-error); margin-top: 6px; font-weight: 600; display: none; }
        .form-error.visible { display: block; animation: fadeIn 0.2s ease; }
        .form-hint { font-size: 11px; color: var(--text-muted); margin-top: 4px; font-weight: 600; }
        .delivery-options { display: flex; flex-direction: column; gap: 12px; }
        .delivery-option {
            padding: 20px; background: var(--bg-card); border: 2px solid var(--bg-light);
            border-radius: 18px; cursor: pointer; transition: var(--transition);
        }
        .delivery-option.selected { border-color: var(--color-primary); background: rgba(255, 107, 53, 0.05); }
        .delivery-option-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }
        .delivery-option-name { font-size: 16px; font-weight: 800; }
        .delivery-option-price { font-size: 15px; font-weight: 800; color: var(--color-primary); }
        .delivery-option-price.free { color: var(--color-success); }
        .delivery-option-address { font-size: 14px; color: var(--text-secondary); font-weight: 600; }
        .delivery-option-note { font-size: 12px; color: var(--text-muted); margin-top: 4px; }
        .delivery-fields { margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--bg-light); display: none; }
        .delivery-option.selected .delivery-fields { display: block; animation: fadeInUp 0.3s ease; }
        .delivery-row { display: flex; gap: 12px; }
        .delivery-row .form-group { flex: 1; }
        .delivery-zone { display: flex; gap: 10px; margin-bottom: 16px; }
        .delivery-zone-btn {
            flex: 1; padding: 12px; background: var(--bg-light); border: 2px solid var(--bg-medium);
            border-radius: 12px; text-align: center; cursor: pointer; transition: var(--transition);
        }
        .delivery-zone-btn.active { border-color: var(--color-primary); background: rgba(255, 107, 53, 0.1); }
        .delivery-zone-name { font-size: 13px; font-weight: 700; margin-bottom: 2px; }
        .delivery-zone-price { font-size: 12px; font-weight: 600; color: var(--color-primary); }
        .delivery-error-msg {
            text-align: center; padding: 12px; background: rgba(239,68,68,0.08);
            border: 1px solid rgba(239,68,68,0.3); border-radius: 12px;
            color: var(--color-error); font-size: 13px; font-weight: 700;
            margin-top: 12px; display: none;
        }
        .delivery-error-msg.visible { display: block; animation: shake 0.4s ease; }
        .confirm-card { background: var(--bg-card); border-radius: 18px; padding: 18px; margin-bottom: 14px; border: 1px solid var(--bg-light); }
        .confirm-card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        .confirm-card-title { font-size: 15px; font-weight: 800; }
        .confirm-card-edit { color: var(--color-secondary); font-size: 14px; font-weight: 700; cursor: pointer; }
        .confirm-card-content { font-size: 14px; color: var(--text-secondary); font-weight: 600; line-height: 1.7; }
        .confirm-total { background: var(--bg-card); border: 2px solid var(--color-primary); border-radius: 20px; padding: 20px; margin-bottom: 16px; box-shadow: var(--shadow-glow); }
        .confirm-total-row { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 14px; font-weight: 600; color: var(--text-secondary); }
        .confirm-total-row span:last-child { color: var(--text-primary); }
        .confirm-total-row.discount { color: var(--color-success); }
        .confirm-total-row.discount span:last-child { color: var(--color-success); }
        .confirm-total-final { display: flex; justify-content: space-between; padding-top: 14px; border-top: 1px solid var(--bg-light); font-size: 24px; font-weight: 900; }
        .payment-info {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.12) 0%, rgba(255, 107, 53, 0.12) 100%);
            border: 2px solid var(--color-accent); border-radius: 16px; padding: 16px; margin-bottom: 18px;
        }
        .payment-info-title { font-weight: 800; color: var(--color-accent); margin-bottom: 10px; font-size: 15px; }
        .payment-row { display: flex; justify-content: space-between; margin-bottom: 6px; font-size: 13px; font-weight: 600; color: var(--text-secondary); }
        .payment-row span:last-child { color: var(--text-primary); font-weight: 700; }
        .payment-note { font-size: 12px; color: var(--text-muted); margin-top: 8px; font-style: italic; }
        .next-btn {
            width: 100%; padding: 18px; background: var(--gradient-orange); color: white; border: none;
            border-radius: 16px; font-size: 17px; font-weight: 800; cursor: pointer;
            transition: var(--transition); box-shadow: var(--shadow-button); margin-top: 20px;
            font-family: 'Nunito', sans-serif;
        }
        .next-btn:active { transform: scale(0.98); }
        .next-btn.pulse { animation: pulse 2s infinite; }

        /* ===== –£–°–ü–ï–• ===== */
        .success-overlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: var(--bg-dark); display: none; flex-direction: column;
            align-items: center; justify-content: center; z-index: 1000; padding: 24px; text-align: center;
        }
        .success-overlay.active { display: flex; animation: fadeIn 0.3s ease; }
        .success-icon {
            width: 130px; height: 130px; background: var(--gradient-orange); border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            margin-bottom: 32px; animation: bounceIn 0.5s ease; box-shadow: 0 0 60px rgba(255, 107, 53, 0.5);
        }
        .success-icon svg { width: 65px; height: 65px; stroke: white; stroke-width: 3; }
        .success-title { font-size: 34px; font-weight: 900; margin-bottom: 10px; }
        .success-order { font-size: 17px; color: var(--text-secondary); margin-bottom: 24px; font-weight: 600; }
        .success-text { font-size: 15px; color: var(--text-secondary); margin-bottom: 36px; line-height: 1.8; font-weight: 600; }
        .success-buttons { display: flex; flex-direction: column; gap: 12px; width: 100%; max-width: 320px; }
        .success-btn-primary {
            padding: 18px; background: var(--gradient-orange); color: white; border: none;
            border-radius: 16px; font-size: 17px; font-weight: 800; cursor: pointer;
            font-family: 'Nunito', sans-serif; box-shadow: var(--shadow-button);
            display: flex; align-items: center; justify-content: center; gap: 8px; text-decoration: none;
        }
        .success-btn-secondary {
            padding: 16px; background: transparent; color: var(--color-primary);
            border: 2px solid var(--color-primary); border-radius: 16px;
            font-size: 16px; font-weight: 800; cursor: pointer; font-family: 'Nunito', sans-serif;
        }
        .confetti-piece { position: fixed; z-index: 1001; pointer-events: none; animation: confettiFall linear forwards; }
        @keyframes confettiFall { 0% { transform: translateY(0) rotate(0deg); opacity: 1; } 100% { transform: translateY(100vh) rotate(720deg); opacity: 0; } }

        /* ===== –ê–ù–ò–ú–ê–¶–ò–ò ===== */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes bounce { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.3); } }
        @keyframes bounceIn { 0% { transform: scale(0); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        @keyframes pulse { 0%, 100% { transform: scale(1); box-shadow: var(--shadow-button); } 50% { transform: scale(1.02); box-shadow: 0 6px 30px rgba(255, 107, 53, 0.5); } }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 20% { transform: translateX(-6px); } 40% { transform: translateX(6px); } 60% { transform: translateX(-4px); } 80% { transform: translateX(4px); } }

        @media (min-width: 768px) {
            .sizes-grid { grid-template-columns: repeat(3, 1fr); }
            .examples-grid { grid-template-columns: repeat(4, 1fr); }
            .promo-cards { grid-template-columns: repeat(4, 1fr); }
        }
    </style>
</head>
<body>    <!-- SPLASH SCREEN -->
    <div class="splash" id="splashScreen">
        <div class="splash-stage" id="splashStage">
            <div class="splash-glow" id="splashGlow"></div>
            <div class="splash-shockwave" id="splashShockwave"></div>
            <div class="splash-painting" id="splashPainting">
                <div class="splash-painting-frame">
                    <div class="splash-painting-art">üñºÔ∏è</div>
                </div>
            </div>
            <div class="splash-gift" id="splashGift">
                <div class="splash-gift-lid">
                    <div class="splash-gift-bow">üéÄ</div>
                    <div class="splash-gift-lid-ribbon"></div>
                </div>
                <div class="splash-gift-body">
                    <div class="splash-gift-ribbon-v"></div>
                    <div class="splash-gift-ribbon-h"></div>
                </div>
            </div>
        </div>
        <div class="splash-logo" id="splashLogo">
            <span class="splash-logo-text">ARTHOLST</span>
        </div>
        <div class="splash-tagline" id="splashTagline">–ö–∞—Ä—Ç–∏–Ω—ã –Ω–∞ —Ö–æ–ª—Å—Ç–µ</div>
    </div>

        <!-- –ì–õ–ê–í–ù–ê–Ø -->
    <div id="homePage" class="page active">
        <header class="header">
            <div class="logo">ARTHOLST</div>
            <div class="header-right">
                <a href="https://t.me/oformitszakaz" target="_blank" class="manager-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg>
                    –ù–∞–ø–∏—Å–∞—Ç—å
                </a>
                <div class="cart-icon" onclick="openCart()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"/>
                        <line x1="3" y1="6" x2="21" y2="6"/>
                        <path d="M16 10a4 4 0 01-8 0"/>
                    </svg>
                    <span id="cartBadge" class="cart-badge hidden">0</span>
                </div>
            </div>
        </header>
        <section class="hero">
            <div class="hero-line"></div>
            <a href="https://instagram.com/artholst_belarus" target="_blank" class="hero-instagram">üì∏ @artholst_belarus</a>
        </section>
        <section class="banners-section">
            <div class="banners-slider"><div class="banners-track" id="bannersTrack"></div></div>
            <div class="banners-dots" id="bannersDots"></div>
        </section>
        <section class="promo-section">
            <div class="promo-title">–ù–∞—à–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞</div>
            <div class="promo-cards" id="promoCards"></div>
        </section>
        <section class="section-header"><h2 class="section-title">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–º–µ—Ä</h2><div class="section-line"></div></section>
        <div class="sizes-grid" id="sizesGrid"></div>
        <section class="section-header"><h2 class="section-title">–ù–∞—à–∏ —Ä–∞–±–æ—Ç—ã</h2><div class="section-line"></div></section>
        <section class="examples-section">
            <div class="examples-grid" id="examplesGrid"></div>
            <p class="examples-instagram">–ë–æ–ª—å—à–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –≤ <a href="https://instagram.com/artholst_belarus">@artholst_belarus</a></p>
        </section>
        <footer class="footer">
            <div class="footer-logo">ARTHOLST</div>
            <a href="https://instagram.com/artholst_belarus" target="_blank" class="footer-instagram">üì∏ @artholst_belarus</a>
            <p class="footer-text">¬© 2025 ARTHOLST ¬∑ –ö–∞—Ä—Ç–∏–Ω—ã –Ω–∞ —Ö–æ–ª—Å—Ç–µ ¬∑ –° 2018 –≥–æ–¥–∞ ¬∑ 16 000+ –∫–ª–∏–µ–Ω—Ç–æ–≤</p>
        </footer>
    </div>

    <!-- –ö–û–†–ó–ò–ù–ê -->
    <div id="cartPage" class="page">
        <header class="page-header">
            <div class="back-button" onclick="openHome()"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg></div>
            <h1 class="page-title">–ö–æ—Ä–∑–∏–Ω–∞</h1>
            <span class="clear-cart" onclick="clearCart()">–û—á–∏—Å—Ç–∏—Ç—å</span>
        </header>
        <div id="cartContent"></div>
    </div>

    <!-- –û–§–û–†–ú–õ–ï–ù–ò–ï -->
    <div id="checkoutPage" class="page">
        <header class="page-header">
            <div class="back-button" onclick="goBackCheckout()"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg></div>
            <h1 class="page-title">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</h1>
            <div style="width:44px"></div>
        </header>
        <div class="checkout-content">
            <div class="progress-bar">
                <div class="progress-step active" id="step1">1</div>
                <div class="progress-line" id="line1"></div>
                <div class="progress-step" id="step2">2</div>
                <div class="progress-line" id="line2"></div>
                <div class="progress-step" id="step3">3</div>
            </div>
            <!-- –®–∞–≥ 1: –ö–æ–Ω—Ç–∞–∫—Ç—ã -->
            <div class="checkout-step active" id="checkoutStep1">
                <h2 class="step-title">–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h2>
                <div class="form-group">
                    <label class="form-label">–§–ò–û <span class="req">*</span></label>
                    <input type="text" class="form-input" id="inputName" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á" autocomplete="name">
                    <div class="form-error" id="errorName"></div>
                    <div class="form-hint">–§–∞–º–∏–ª–∏—è –∏ –∏–º—è –ø–æ–ª–Ω–æ—Å—Ç—å—é</div>
                </div>
                <div class="form-group">
                    <label class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω <span class="req">*</span></label>
                    <input type="tel" class="form-input" id="inputPhone" placeholder="+375 (__) ___-__-__" autocomplete="tel">
                    <div class="form-error" id="errorPhone"></div>
                    <div class="form-hint">–§–æ—Ä–º–∞—Ç: +375 29 123-45-67</div>
                </div>
                <button class="next-btn" onclick="goToStep2()">
                    <span>–î–∞–ª–µ–µ</span>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" style="vertical-align:middle;margin-left:4px"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                </button>
            </div>
            <!-- –®–∞–≥ 2: –î–æ—Å—Ç–∞–≤–∫–∞ -->
            <div class="checkout-step" id="checkoutStep2">
                <h2 class="step-title">–°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏</h2>
                <div class="delivery-options">
                    <div class="delivery-option" data-type="courier" onclick="selectDelivery('courier')">
                        <div class="delivery-option-header">
                            <span class="delivery-option-name">üöó –ö—É—Ä—å–µ—Ä –ø–æ –ú–∏–Ω—Å–∫—É</span>
                            <span class="delivery-option-price" id="courierPrice">15 BYN</span>
                        </div>
                        <p class="delivery-option-note">–í –ø—Ä–µ–¥–µ–ª–∞—Ö –ú–ö–ê–î ‚Äî 15 BYN, –∑–∞ –ú–ö–ê–î ‚Äî 20 BYN</p>
                        <div class="delivery-fields">
                            <div class="delivery-zone">
                                <div class="delivery-zone-btn active" onclick="selectZone('mkad',event)">
                                    <div class="delivery-zone-name">–í –ø—Ä–µ–¥–µ–ª–∞—Ö –ú–ö–ê–î</div>
                                    <div class="delivery-zone-price">15 BYN</div>
                                </div>
                                <div class="delivery-zone-btn" onclick="selectZone('outside',event)">
                                    <div class="delivery-zone-name">–ó–∞ –ú–ö–ê–î –¥–æ 5 –∫–º</div>
                                    <div class="delivery-zone-price">20 BYN</div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">–£–ª–∏—Ü–∞ <span class="req">*</span></label>
                                <input type="text" class="form-input" id="inputStreet" placeholder="—É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è">
                                <div class="form-error" id="errorStreet"></div>
                            </div>
                            <div class="delivery-row">
                                <div class="form-group">
                                    <label class="form-label">–î–æ–º <span class="req">*</span></label>
                                    <input type="text" class="form-input" id="inputHouse" placeholder="12">
                                    <div class="form-error" id="errorHouse"></div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">–ö–≤.</label>
                                    <input type="text" class="form-input" id="inputApartment" placeholder="45">
                                </div>
                            </div>
                            <div class="delivery-row">
                                <div class="form-group">
                                    <label class="form-label">–ü–æ–¥—ä–µ–∑–¥</label>
                                    <input type="text" class="form-input" id="inputEntrance" placeholder="2">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">–≠—Ç–∞–∂</label>
                                    <input type="text" class="form-input" id="inputFloor" placeholder="5">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="delivery-option" data-type="pickup" onclick="selectDelivery('pickup')">
                        <div class="delivery-option-header">
                            <span class="delivery-option-name">üìç –°–∞–º–æ–≤—ã–≤–æ–∑</span>
                            <span class="delivery-option-price free">–ë–ï–°–ü–õ–ê–¢–ù–û</span>
                        </div>
                        <p class="delivery-option-address">–≥. –ú–∏–Ω—Å–∫, —Ä–∞–π–æ–Ω –ú–∏–Ω—Å–∫ –ú–∏—Ä</p>
                    </div>
                    <div class="delivery-option" data-type="post" onclick="selectDelivery('post')">
                        <div class="delivery-option-header">
                            <span class="delivery-option-name">üìÆ –ë–µ–ª–ø–æ—á—Ç–∞</span>
                            <span class="delivery-option-price" id="postPrice">–æ—Ç 10 BYN</span>
                        </div>
                        <div class="delivery-fields">
                            <div class="form-group">
                                <label class="form-label">–ü–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å <span class="req">*</span></label>
                                <input type="text" class="form-input" id="inputPostAddress" placeholder="–≥. –ì–æ–º–µ–ª—å, —É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, –¥. 1, –∫–≤. 2">
                                <div class="form-error" id="errorPostAddress"></div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">–ò–Ω–¥–µ–∫—Å <span class="req">*</span></label>
                                <input type="text" class="form-input" id="inputPostIndex" placeholder="246000" maxlength="6" inputmode="numeric">
                                <div class="form-error" id="errorPostIndex"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="delivery-error-msg" id="deliveryError">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏</div>
                <button class="next-btn" onclick="goToStep3()">
                    <span>–î–∞–ª–µ–µ</span>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" style="vertical-align:middle;margin-left:4px"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                </button>
            </div>
            <!-- –®–∞–≥ 3: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ -->
            <div class="checkout-step" id="checkoutStep3">
                <h2 class="step-title">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</h2>
                <div class="confirm-card"><div class="confirm-card-header"><span class="confirm-card-title">üì¶ –ó–∞–∫–∞–∑</span></div><div class="confirm-card-content" id="confirmOrder"></div></div>
                <div class="confirm-card"><div class="confirm-card-header"><span class="confirm-card-title">üë§ –ö–æ–Ω—Ç–∞–∫—Ç—ã</span><span class="confirm-card-edit" onclick="goToStep(1)">–ò–∑–º–µ–Ω–∏—Ç—å</span></div><div class="confirm-card-content" id="confirmContacts"></div></div>
                <div class="confirm-card"><div class="confirm-card-header"><span class="confirm-card-title">üöö –î–æ—Å—Ç–∞–≤–∫–∞</span><span class="confirm-card-edit" onclick="goToStep(2)">–ò–∑–º–µ–Ω–∏—Ç—å</span></div><div class="confirm-card-content" id="confirmDelivery"></div></div>
                <div class="confirm-total">
                    <div class="confirm-total-row"><span>–¢–æ–≤–∞—Ä—ã:</span><span id="confirmProducts">0 BYN</span></div>
                    <div class="confirm-total-row"><span>–£–ø–∞–∫–æ–≤–∫–∞:</span><span id="confirmPackaging">0 BYN</span></div>
                    <div class="confirm-total-row"><span>–î–æ—Å—Ç–∞–≤–∫–∞:</span><span id="confirmDeliveryPrice">0 BYN</span></div>
                    <div class="confirm-total-row discount" id="confirmDiscountRow" style="display:none"><span>–°–∫–∏–¥–∫–∞:</span><span id="confirmDiscount">0 BYN</span></div>
                    <div class="confirm-total-final"><span>–ò–¢–û–ì–û:</span><span id="confirmTotal">0 BYN</span></div>
                </div>
                <div class="payment-info">
                    <div class="payment-info-title">üí≥ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ–ø–ª–∞—Ç–µ</div>
                    <div class="payment-row"><span>–ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ 50%:</span><span id="confirmPrepay">0 BYN</span></div>
                    <div class="payment-row"><span>–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏:</span><span id="confirmOnDelivery">0 BYN</span></div>
                    <div class="payment-note">–û–ø–ª–∞—Ç–∞ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –º–∞–∫–µ—Ç–∞</div>
                </div>
                <button class="next-btn pulse" onclick="submitOrder()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" style="vertical-align:middle;margin-right:6px"><polyline points="20 6 9 17 4 12"/></svg>
                    –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
                </button>
            </div>
        </div>
    </div>

    <!-- –£–°–ü–ï–• -->
    <div id="successOverlay" class="success-overlay">
        <div class="success-icon"><svg viewBox="0 0 24 24" fill="none"><polyline points="20 6 9 17 4 12"/></svg></div>
        <h1 class="success-title">–ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω! üéâ</h1>
        <p class="success-order" id="successOrderId">–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞: #12345</p>
        <p class="success-text">–ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ Telegram –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –º–∞–∫–µ—Ç–∞.<br>–ü–æ—Å–ª–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è ‚Äî –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ 50%.</p>
        <div class="success-buttons">
            <a href="https://t.me/oformitszakaz" target="_blank" class="success-btn-primary">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg>
                –ù–∞–ø–∏—Å–∞—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä—É
            </a>
            <button class="success-btn-secondary" onclick="backToHome()">–ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–ö–ê -->
    <div class="modal-overlay" id="modalOverlay" onclick="closeModal(event)">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-close" onclick="closeModal()">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M18 6L6 18M6 6l12 12"/></svg>
            </div>
            <div class="modal-emoji" id="modalEmoji"></div>
            <div class="modal-title" id="modalTitle"></div>
            <div class="modal-text" id="modalText"></div>
            <div id="modalSizeDetails" style="display:none"></div>
            <div class="modal-promo-code" id="modalPromo" style="display:none">
                <div class="modal-promo-label">–ü—Ä–æ–º–æ–∫–æ–¥:</div>
                <div class="modal-promo-value" id="modalPromoCode"></div>
            </div>
            <div class="modal-buttons" id="modalButtons">
                <button class="modal-btn" id="modalMainBtn" onclick="closeModal()">–ü–æ–Ω—è—Ç–Ω–æ</button>
            </div>
        </div>
    </div>

    <script>
        // ===== –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï =====
        let config = null;
        let cart = [];
        let currentBanner = 0;
        let bannerInterval = null;
        let currentStep = 1;
        let selectedDelivery = null;
        let selectedZone = 'mkad';
        let appliedPromo = null;
        let discountPercent = 0;

        const tg = window.Telegram && window.Telegram.WebApp ? window.Telegram.WebApp : null;
        if (tg) { tg.ready(); tg.expand(); }
        function haptic(type) {
            try { if (tg && tg.HapticFeedback) { if (['light','medium','heavy'].includes(type)) tg.HapticFeedback.impactOccurred(type); else tg.HapticFeedback.notificationOccurred(type); } } catch(e){}
        }

        // ===== –î–ê–ù–ù–´–ï =====
        function getDefaultConfig() {
            return {
                banners: [
                    { id:1, emoji:"üéÅ", title:"–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞", subtitle:"–ü—Ä–∏ –∑–∞–∫–∞–∑–µ –æ—Ç 200 BYN", gradient:"linear-gradient(135deg, #FF6B35 0%, #FF8C42 100%)", full_description:"–û—Ç–ª–∏—á–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏!\n\n‚ú® –ü—Ä–∏ –∑–∞–∫–∞–∑–µ –æ—Ç 200 BYN –º—ã –±–µ—Ä—ë–º –¥–æ—Å—Ç–∞–≤–∫—É –Ω–∞ —Å–µ–±—è!\n\nüöó –ö—É—Ä—å–µ—Ä –ø–æ –ú–∏–Ω—Å–∫—É\nüìÆ –ë–µ–ª–ø–æ—á—Ç–∞ –ø–æ –≤—Å–µ–π –ë–µ–ª–∞—Ä—É—Å–∏\n\n–ó–∞–∫–∞–∂–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞—Ä—Ç–∏–Ω –∏ –ø–æ–ª—É—á–∏—Ç–µ –∏—Ö –±–µ—Å–ø–ª–∞—Ç–Ω–æ!", promo_code:null },
                    { id:2, emoji:"üî•", title:"–°–∫–∏–¥–∫–∞ 15%", subtitle:"–ü—Ä–∏ –∑–∞–∫–∞–∑–µ –æ—Ç 3-—Ö –∫–∞—Ä—Ç–∏–Ω", gradient:"linear-gradient(135deg, #7C3AED 0%, #A855F7 100%)", full_description:"–ë–æ–ª—å—à–µ –∫–∞—Ä—Ç–∏–Ω ‚Äî –±–æ–ª—å—à–µ –≤—ã–≥–æ–¥–∞!\n\nüíé –ó–∞–∫–∞–∂–∏—Ç–µ 3+ –∫–∞—Ä—Ç–∏–Ω –∏ –ø–æ–ª—É—á–∏—Ç–µ —Å–∫–∏–¥–∫—É 15% –Ω–∞ –≤–µ—Å—å –∑–∞–∫–∞–∑!\n\nüé® –°–æ–∑–¥–∞–π—Ç–µ –≥–∞–ª–µ—Ä–µ—é —É —Å–µ–±—è –¥–æ–º–∞\nüéÅ –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –ø–æ–¥–∞—Ä–∫–æ–≤\n\n–°–∫–∏–¥–∫–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!", promo_code:null },
                    { id:3, emoji:"‚ö°Ô∏è", title:"–ü—Ä–æ–º–æ–∫–æ–¥ –°–ï–ì–û–î–ù–Ø", subtitle:"–°–∫–∏–¥–∫–∞ 10% –≤ —Å—Ä–µ–¥—É –∏ —Å—É–±–±–æ—Ç—É", gradient:"linear-gradient(135deg, #F59E0B 0%, #FF6B35 100%)", full_description:"–õ–æ–≤–∏—Ç–µ –º–æ–º–µ–Ω—Ç! –ö–∞–∂–¥—É—é —Å—Ä–µ–¥—É –∏ —Å—É–±–±–æ—Ç—É ‚Äî —Å—á–∞—Å—Ç–ª–∏–≤—ã–µ –¥–Ω–∏!\n\nüéâ –ü—Ä–æ–º–æ–∫–æ–¥ –°–ï–ì–û–î–ù–Ø = —Å–∫–∏–¥–∫–∞ 10%\n\n‚è∞ –ê–∫—Ü–∏—è –¥–µ–π—Å—Ç–≤—É–µ—Ç:\n‚Ä¢ –°—Ä–µ–¥–∞ ‚Äî –≤–µ—Å—å –¥–µ–Ω—å\n‚Ä¢ –°—É–±–±–æ—Ç–∞ ‚Äî –≤–µ—Å—å –¥–µ–Ω—å\n\nüí° –í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥ –≤ –∫–æ—Ä–∑–∏–Ω–µ.", promo_code:"–°–ï–ì–û–î–ù–Ø" }
                ],
                promo_cards: [
                    { icon:"üé®", title:"–£–ª—É—á—à–∞–µ–º –∫–∞—á–µ—Å—Ç–≤–æ –ø–ª–æ—Ö–∏—Ö —Ñ–æ—Ç–æ", full_description:"–ù–µ –ø–µ—Ä–µ–∂–∏–≤–∞–π—Ç–µ –∑–∞ –∫–∞—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ!\n\nüé® –ù–∞—à–∏ –¥–∏–∑–∞–π–Ω–µ—Ä—ã –±–µ—Å–ø–ª–∞—Ç–Ω–æ:\n‚Ä¢ –ü–æ–≤—ã—Å—è—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ\n‚Ä¢ –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É—é—Ç —Ü–≤–µ—Ç–∞\n‚Ä¢ –£–±–µ—Ä—É—Ç –¥–µ—Ñ–µ–∫—Ç—ã\n\nüì∏ –î–∞–∂–µ —Ñ–æ—Ç–æ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —Å—Ç–∞–Ω–µ—Ç –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ–º –∏—Å–∫—É—Å—Å—Ç–≤–∞!" },
                    { icon:"‚ö°Ô∏è", title:"–ë—ã—Å—Ç—Ä–æ–µ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ 1-3 –¥–Ω—è", full_description:"–ú—ã —Ü–µ–Ω–∏–º –≤–∞—à–µ –≤—Ä–µ–º—è!\n\n‚ö° –°—Ä–æ–∫–∏:\n‚Ä¢ –°—Ç–∞–Ω–¥–∞—Ä—Ç: 1-3 —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è\n‚Ä¢ –°—Ä–æ—á–Ω—ã–π: 24 —á–∞—Å–∞ (+30%)\n\nüè≠ –°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –≤ –ú–∏–Ω—Å–∫–µ." },
                    { icon:"üíØ", title:"–ì–∞—Ä–∞–Ω—Ç–∏—è 100+ –ª–µ—Ç", full_description:"–í–∞—à–∏ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è ‚Äî –Ω–∞–≤—Å–µ–≥–¥–∞!\n\nüíé –ü–æ—á–µ–º—É 100+ –ª–µ—Ç:\n‚Ä¢ UV-—Å—Ç–æ–π–∫–∏–µ —á–µ—Ä–Ω–∏–ª–∞\n‚Ä¢ –ù–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π —Ö–æ–ª—Å—Ç\n‚Ä¢ –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–æ–¥—Ä–∞–º–Ω–∏–∫\n\nüèÜ 16 000+ –¥–æ–≤–æ–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤!" },
                    { icon:"üåø", title:"–ù–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π —Ö–ª–æ–ø–∫–æ–≤—ã–π —Ö–æ–ª—Å—Ç", full_description:"–¢–æ–ª—å–∫–æ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã!\n\nüåø –ù–∞—à —Ö–æ–ª—Å—Ç:\n‚Ä¢ 100% —Ö–ª–æ–ø–æ–∫\n‚Ä¢ –ü–ª–æ—Ç–Ω–æ—Å—Ç—å 360 –≥/–º¬≤\n‚Ä¢ –ú—É–∑–µ–π–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ\n‚Ä¢ –ë–µ–∑ –±–ª–∏–∫–æ–≤" },
                    { icon:"ü™µ", title:"–ü–æ–¥—Ä–∞–º–Ω–∏–∫ –∏–∑ —Ü–µ–ª—å–Ω–æ–≥–æ –¥–µ—Ä–µ–≤–∞", full_description:"–û—Å–Ω–æ–≤–∞ –∫–∞—á–µ—Å—Ç–≤–∞!\n\nü™µ –ü–æ–¥—Ä–∞–º–Ω–∏–∫–∏:\n‚Ä¢ –ù–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è —Å–æ—Å–Ω–∞\n‚Ä¢ –¶–µ–ª—å–Ω–æ–µ –¥–µ—Ä–µ–≤–æ\n‚Ä¢ –¢–æ–ª—â–∏–Ω–∞ 2 —Å–º\n\nüîß –ö—Ä–µ–ø–ª–µ–Ω–∏—è –≤ –∫–æ–º–ø–ª–µ–∫—Ç–µ!" },
                    { icon:"üñºÔ∏è", title:"–ì–∞–ª–µ—Ä–µ–π–Ω–∞—è –Ω–∞—Ç—è–∂–∫–∞ —Ö–æ–ª—Å—Ç–∞", full_description:"–ö–∞–∫ –≤ –Ω–∞—Å—Ç–æ—è—â–µ–π –≥–∞–ª–µ—Ä–µ–µ!\n\nüñº –ì–∞–ª–µ—Ä–µ–π–Ω–∞—è –Ω–∞—Ç—è–∂–∫–∞:\n‚Ä¢ –•–æ–ª—Å—Ç –∑–∞–≥–Ω—É—Ç –Ω–∞ —Ç–æ—Ä—Ü—ã\n‚Ä¢ –û–±—ä—ë–º–Ω—ã–π –≤–∏–¥\n‚Ä¢ –ù–µ –Ω—É–∂–Ω–∞ —Ä–∞–º–∞\n‚Ä¢ –°–∫–æ–±—ã —Å–∑–∞–¥–∏ ‚Äî –Ω–µ –≤–∏–¥–Ω—ã" },
                    { icon:"üß™", title:"–ì–∏–ø–æ–∞–ª–ª–µ—Ä–≥–µ–Ω–Ω—ã–µ –∫—Ä–∞—Å–∫–∏", full_description:"–ë–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è –≤—Å–µ–π —Å–µ–º—å–∏!\n\nüå± –ö—Ä–∞—Å–∫–∏:\n‚Ä¢ –ù–∞ –≤–æ–¥–Ω–æ–π –æ—Å–Ω–æ–≤–µ\n‚Ä¢ –ë–µ–∑ –∑–∞–ø–∞—Ö–∞\n‚Ä¢ –ì–∏–ø–æ–∞–ª–ª–µ—Ä–≥–µ–Ω–Ω—ã–µ\n\nüë∂ –ë–µ–∑–æ–ø–∞—Å–Ω—ã –¥–ª—è –¥–µ—Ç—Å–∫–∏—Ö –∫–æ–º–Ω–∞—Ç!" },
                    { icon:"‚ù§Ô∏è", title:"16 000 –¥–æ–≤–æ–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤", full_description:"–ù–∞–º –¥–æ–≤–µ—Ä—è—é—Ç —Ç—ã—Å—è—á–∏ —Å–µ–º–µ–π!\n\n‚ù§Ô∏è ARTHOLST:\n‚Ä¢ 16 000+ –∑–∞–∫–∞–∑–æ–≤\n‚Ä¢ –° 2018 –≥–æ–¥–∞\n‚Ä¢ 4.9 ‚òÖ —Å—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞\n‚Ä¢ 98% —Ä–µ–∫–æ–º–µ–Ω–¥—É—é—Ç" }
                ],
                sizes: [
                    {width:30,height:30,price:33,packaging_price:10,delivery_price:10,hit:false,popular:false},
                    {width:30,height:50,price:39,packaging_price:10,delivery_price:10,hit:false,popular:false},
                    {width:40,height:40,price:44,packaging_price:12,delivery_price:12,hit:false,popular:false},
                    {width:40,height:60,price:49,packaging_price:12,delivery_price:12,hit:false,popular:false},
                    {width:50,height:50,price:55,packaging_price:14,delivery_price:14,hit:false,popular:false},
                    {width:50,height:70,price:59,packaging_price:14,delivery_price:14,hit:true,popular:false},
                    {width:60,height:60,price:66,packaging_price:16,delivery_price:16,hit:false,popular:false},
                    {width:60,height:80,price:69,packaging_price:16,delivery_price:16,hit:false,popular:true},
                    {width:70,height:70,price:79,packaging_price:18,delivery_price:18,hit:false,popular:false},
                    {width:80,height:80,price:89,packaging_price:18,delivery_price:18,hit:false,popular:false},
                    {width:70,height:100,price:109,packaging_price:20,delivery_price:20,hit:true,popular:false},
                    {width:80,height:120,price:129,packaging_price:24,delivery_price:22,hit:false,popular:false}
                ],
                example_works: [
                    {category:"–°–µ–º—å—è",icon:"üë®‚Äçüë©‚Äçüëß‚Äçüë¶",size:"50√ó70"},
                    {category:"–î–µ—Ç–∏",icon:"üë∂",size:"40√ó60"},
                    {category:"–ü–∞—Ä—ã",icon:"üíë",size:"60√ó80"},
                    {category:"–ü–∏—Ç–æ–º—Ü—ã",icon:"üêï",size:"50√ó50"}
                ]
            };
        }

        async function loadConfig() {
            const defaults = getDefaultConfig();
            try {
                const r = await fetch('config.json');
                const json = await r.json();
                config = json;
                if(config.banners) config.banners.forEach((b,i) => { if(!b.full_description && defaults.banners[i]) b.full_description = defaults.banners[i].full_description; if(b.promo_code===undefined && defaults.banners[i]) b.promo_code = defaults.banners[i].promo_code; });
                if(config.promo_cards) config.promo_cards.forEach((p,i) => { if(!p.full_description && defaults.promo_cards[i]) p.full_description = defaults.promo_cards[i].full_description; });
                if(!config.example_works) config.example_works = defaults.example_works;
                if(!config.sizes) config.sizes = defaults.sizes;
            } catch(e) { config = defaults; }
            renderApp();
        }

        // ===== –ú–û–î–ê–õ–ö–ò =====
        function resetModalButtons() {
            const btn = document.getElementById('modalMainBtn');
            btn.textContent = '–ü–æ–Ω—è—Ç–Ω–æ';
            btn.className = 'modal-btn';
            btn.onclick = function(){ closeModal(); };
            const existing = document.getElementById('modalSecondaryBtn');
            if(existing) existing.remove();
        }

        function openModal(emoji, title, text, promoCode, sizeHtml) {
            resetModalButtons();
            document.getElementById('modalEmoji').textContent = emoji;
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalText').textContent = text;
            const promoEl = document.getElementById('modalPromo');
            const sizeEl = document.getElementById('modalSizeDetails');
            if(promoCode) {
                document.getElementById('modalPromoCode').textContent = promoCode;
                promoEl.style.display = 'block';
                // –ö–Ω–æ–ø–∫–∞ "–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å"
                const btn = document.getElementById('modalMainBtn');
                btn.innerHTML = '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" style="vertical-align:middle;margin-right:6px"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥';
                btn.onclick = function() { copyPromoCode(promoCode, btn); };
                // –ö–Ω–æ–ø–∫–∞ "–ó–∞–∫—Ä—ã—Ç—å" –≤—Ç–æ—Ä–∏—á–Ω–∞—è
                const sec = document.createElement('button');
                sec.className = 'modal-btn-secondary';
                sec.id = 'modalSecondaryBtn';
                sec.textContent = '–ó–∞–∫—Ä—ã—Ç—å';
                sec.onclick = function(){ closeModal(); };
                document.getElementById('modalButtons').appendChild(sec);
            } else { promoEl.style.display = 'none'; }
            if(sizeHtml) { sizeEl.innerHTML = sizeHtml; sizeEl.style.display = 'block'; } else { sizeEl.style.display = 'none'; }
            document.getElementById('modalOverlay').classList.add('active');
            haptic('light');
        }

        function copyPromoCode(code, btn) {
            navigator.clipboard.writeText(code).then(() => {
                btn.innerHTML = '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" style="vertical-align:middle;margin-right:6px"><polyline points="20 6 9 17 4 12"/></svg>–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
                btn.classList.add('copied');
                haptic('success');
                setTimeout(() => {
                    btn.innerHTML = '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" style="vertical-align:middle;margin-right:6px"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥';
                    btn.classList.remove('copied');
                }, 2000);
            }).catch(() => {});
        }

        function closeModal(event) {
            if(event && event.target !== event.currentTarget) return;
            document.getElementById('modalOverlay').classList.remove('active');
        }

        function openPromoModal(i) {
            const p = config.promo_cards[i];
            openModal(p.icon, p.title, p.full_description || p.title, null, null);
        }
        function openBannerModal(i) {
            const b = config.banners[i];
            openModal(b.emoji, b.title, b.full_description || b.subtitle, b.promo_code || null, null);
        }

        // –ú–æ–¥–∞–ª–∫–∞ —Ä–∞–∑–º–µ—Ä–∞
        function openSizeModal(index) {
            resetModalButtons();
            const s = config.sizes[index];
            const html = '<div class="size-modal-details">'
                +'<div class="size-modal-row"><span class="size-modal-row-label">üìê –†–∞–∑–º–µ—Ä</span><span class="size-modal-row-value">'+s.width+'√ó'+s.height+' —Å–º</span></div>'
                +'<div class="size-modal-row"><span class="size-modal-row-label">üí∞ –¶–µ–Ω–∞</span><span class="size-modal-row-value price">'+s.price+' BYN</span></div>'
                +'<div class="size-modal-row"><span class="size-modal-row-label">üéÅ –£–ø–∞–∫–æ–≤–∫–∞</span><span class="size-modal-row-value">+'+s.packaging_price+' BYN</span></div>'
                +'<div class="size-modal-row"><span class="size-modal-row-label">üìÆ –ë–µ–ª–ø–æ—á—Ç–∞</span><span class="size-modal-row-value">–æ—Ç '+s.delivery_price+' BYN</span></div>'
                +'</div>'
                +'<div class="size-modal-features">'
                +'<span class="size-modal-feature">üåø –•–ª–æ–ø–∫–æ–≤—ã–π —Ö–æ–ª—Å—Ç</span>'
                +'<span class="size-modal-feature">ü™µ –¶–µ–ª—å–Ω–æ–µ –¥–µ—Ä–µ–≤–æ</span>'
                +'<span class="size-modal-feature">üñºÔ∏è –ì–∞–ª–µ—Ä–µ–π–Ω–∞—è –Ω–∞—Ç—è–∂–∫–∞</span>'
                +'<span class="size-modal-feature">üíØ –ì–∞—Ä–∞–Ω—Ç–∏—è 100+ –ª–µ—Ç</span>'
                +'<span class="size-modal-feature">üß™ –≠–∫–æ-–∫—Ä–∞—Å–∫–∏</span>'
                +'<span class="size-modal-feature">üé® –£–ª—É—á—à–µ–Ω–∏–µ —Ñ–æ—Ç–æ</span>'
                +'</div>';
            openModal('üñºÔ∏è', s.width+'√ó'+s.height+' —Å–º', '–ö–∞—Ä—Ç–∏–Ω–∞ –Ω–∞ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–æ–º —Ö–æ–ª—Å—Ç–µ —Å –ø–æ–¥—Ä–∞–º–Ω–∏–∫–æ–º –∏–∑ —Ü–µ–ª—å–Ω–æ–≥–æ –¥–µ—Ä–µ–≤–∞. –ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ 1-3 –¥–Ω—è.', null, html);
            const btn = document.getElementById('modalMainBtn');
            btn.innerHTML = '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" style="vertical-align:middle;margin-right:6px"><path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 01-8 0"/></svg>–í –∫–æ—Ä–∑–∏–Ω—É ‚Äî '+s.price+' BYN';
            btn.onclick = function() {
                addToCartFromModal(index);
                closeModal();
            };
            const sec = document.createElement('button');
            sec.className = 'modal-btn-secondary';
            sec.id = 'modalSecondaryBtn';
            sec.textContent = '–ó–∞–∫—Ä—ã—Ç—å';
            sec.onclick = function(){ closeModal(); };
            document.getElementById('modalButtons').appendChild(sec);
        }

        function addToCartFromModal(i) {
            const size = config.sizes[i];
            cart.push({id:Date.now(),size,packaging:false,comment:''});
            saveCart(); haptic('medium');
            const badge = document.getElementById('cartBadge');
            badge.style.animation = 'none';
            setTimeout(() => badge.style.animation = 'bounce 0.3s ease', 10);
        }

        // ===== –†–ï–ù–î–ï–† =====
        function renderApp() {
            renderBanners(); renderPromoCards(); renderSizes(); renderExamples();
            loadCart(); startBannerSlider(); setupPhoneMask(); setupFormValidation();
        }

        function renderBanners() {
            const track = document.getElementById('bannersTrack');
            const dots = document.getElementById('bannersDots');
            track.innerHTML = config.banners.map((b,i) => '<div class="banner" style="background:'+b.gradient+'" onclick="openBannerModal('+i+')"><span class="banner-emoji">'+b.emoji+'</span><div class="banner-title">'+b.title+'</div><div class="banner-subtitle">'+b.subtitle+'</div><div class="banner-tap">–ü–æ–¥—Ä–æ–±–Ω–µ–µ ‚Üí</div></div>').join('');
            dots.innerHTML = config.banners.map((_,i) => '<div class="banner-dot '+(i===0?'active':'')+'" onclick="goToBanner('+i+')"></div>').join('');
            let sx=0;
            track.addEventListener('touchstart',e=>{sx=e.touches[0].clientX},{passive:true});
            track.addEventListener('touchend',e=>{const d=sx-e.changedTouches[0].clientX;if(Math.abs(d)>50){d>0?goToBanner((currentBanner+1)%config.banners.length):goToBanner((currentBanner-1+config.banners.length)%config.banners.length)}},{passive:true});
        }

        function startBannerSlider() {
            if(bannerInterval) clearInterval(bannerInterval);
            bannerInterval = setInterval(()=>{currentBanner=(currentBanner+1)%config.banners.length;goToBanner(currentBanner)},4000);
        }
        function goToBanner(i) {
            currentBanner=i;
            document.getElementById('bannersTrack').style.transform='translateX(-'+i*100+'%)';
            document.querySelectorAll('.banner-dot').forEach((d,j)=>d.classList.toggle('active',j===i));
            startBannerSlider();
        }

        function renderPromoCards() {
            document.getElementById('promoCards').innerHTML = config.promo_cards.map((c,i) => '<div class="promo-card" onclick="openPromoModal('+i+')"><span class="promo-icon">'+c.icon+'</span><div class="promo-card-title">'+c.title+'</div></div>').join('');
        }

        function renderSizes() {
            const imgs=['üñºÔ∏è','üåÖ','üé®','üåÑ','üèûÔ∏è','üåá','üñºÔ∏è','üé®','üåÖ','üåÑ','üèûÔ∏è','üåá'];
            document.getElementById('sizesGrid').innerHTML = config.sizes.map((s,i) => {
                const sc=70/Math.max(s.width,s.height); const bw=s.width*sc*0.7; const bh=s.height*sc*0.7;
                let badge='';
                if(s.hit) badge='<span class="size-badge hit">üî• –•–ò–¢</span>';
                if(s.popular) badge='<span class="size-badge popular">‚≠êÔ∏è –¢–û–ü</span>';
                return '<div class="size-card" style="animation-delay:'+i*0.05+'s" onclick="openSizeModal('+i+')">'
                    +badge
                    +'<div class="size-info-btn" onclick="event.stopPropagation();openSizeModal('+i+')"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg></div>'
                    +'<div class="size-preview"><div class="size-preview-frame" style="width:'+bw+'px;height:'+bh+'px"><span class="size-preview-image">'+imgs[i]+'</span></div></div>'
                    +'<div class="size-dimensions">'+s.width+'√ó'+s.height+' —Å–º</div>'
                    +'<div class="size-price">'+s.price+' BYN</div>'
                    +'<div class="size-info">üì¶ +'+s.packaging_price+' ‚Ä¢ üìÆ +'+s.delivery_price+'</div>'
                    +'<button class="add-to-cart-btn" onclick="event.stopPropagation();addToCart('+i+',this)">–í –∫–æ—Ä–∑–∏–Ω—É</button>'
                    +'</div>';
            }).join('');
            setTimeout(()=>{document.querySelectorAll('.size-card').forEach(c=>c.style.opacity='1')},100);
        }

        function renderExamples() {
            document.getElementById('examplesGrid').innerHTML = config.example_works.map(w => '<div class="example-card"><div class="example-icon">'+w.icon+'</div><div class="example-category">'+w.category+'</div><div class="example-size">'+w.size+'</div></div>').join('');
        }

        // ===== –ú–ê–°–ö–ê –¢–ï–õ–ï–§–û–ù–ê =====
        function setupPhoneMask() {
            const ph = document.getElementById('inputPhone');
            ph.addEventListener('input', function() {
                let v = this.value.replace(/\D/g,'');
                if(v.startsWith('375')) v=v; else if(v.startsWith('8')) v='375'+v.substring(1); else if(!v.startsWith('3')) v='375'+v;
                let f='+';
                if(v.length>0) f+=v.substring(0,3);
                if(v.length>3) f+=' ('+v.substring(3,5)+')';
                if(v.length>5) f+=' '+v.substring(5,8);
                if(v.length>8) f+='-'+v.substring(8,10);
                if(v.length>10) f+='-'+v.substring(10,12);
                this.value=f;
                this.classList.remove('error'); hideError('errorPhone');
                if(v.length>=12) this.classList.add('valid'); else this.classList.remove('valid');
            });
        }

        function setupFormValidation() {
            document.getElementById('inputName').addEventListener('input', function() {
                this.classList.remove('error'); hideError('errorName');
                if(this.value.trim().split(/\s+/).filter(w=>w.length>=2).length>=2) this.classList.add('valid'); else this.classList.remove('valid');
            });
            // –û—á–∏—Å—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –≤–≤–æ–¥–µ –ø–æ–ª–µ–π –¥–æ—Å—Ç–∞–≤–∫–∏
            ['inputStreet','inputHouse','inputPostAddress','inputPostIndex'].forEach(id => {
                const el = document.getElementById(id);
                if(el) el.addEventListener('input', function() { this.classList.remove('error'); hideError('error'+id.replace('input','')); });
            });
        }

        // ===== –í–ê–õ–ò–î–ê–¶–ò–Ø =====
        function showError(id,msg) { const el=document.getElementById(id); if(el){el.textContent=msg;el.classList.add('visible');} }
        function hideError(id) { const el=document.getElementById(id); if(el) el.classList.remove('visible'); }

        function validateStep1() {
            let ok=true;
            const name=document.getElementById('inputName').value.trim();
            const phone=document.getElementById('inputPhone').value.replace(/\D/g,'');
            if(!name){showError('errorName','–í–≤–µ–¥–∏—Ç–µ –§–ò–û');document.getElementById('inputName').classList.add('error');ok=false;}
            else if(name.split(/\s+/).filter(w=>w.length>=2).length<2){showError('errorName','–í–≤–µ–¥–∏—Ç–µ —Ñ–∞–º–∏–ª–∏—é –∏ –∏–º—è');document.getElementById('inputName').classList.add('error');ok=false;}
            if(!phone){showError('errorPhone','–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞');document.getElementById('inputPhone').classList.add('error');ok=false;}
            else if(phone.length<12){showError('errorPhone','–ù–æ–º–µ—Ä —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π');document.getElementById('inputPhone').classList.add('error');ok=false;}
            else if(!phone.startsWith('375')){showError('errorPhone','–ù–æ–º–µ—Ä –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å +375');document.getElementById('inputPhone').classList.add('error');ok=false;}
            return ok;
        }

        function validateStep2() {
            let ok=true;
            if(!selectedDelivery){document.getElementById('deliveryError').classList.add('visible');ok=false;}
            else document.getElementById('deliveryError').classList.remove('visible');
            if(selectedDelivery==='courier'){
                if(!document.getElementById('inputStreet').value.trim()){showError('errorStreet','–í–≤–µ–¥–∏—Ç–µ —É–ª–∏—Ü—É');document.getElementById('inputStreet').classList.add('error');ok=false;}
                if(!document.getElementById('inputHouse').value.trim()){showError('errorHouse','–í–≤–µ–¥–∏—Ç–µ –¥–æ–º');document.getElementById('inputHouse').classList.add('error');ok=false;}
            }
            if(selectedDelivery==='post'){
                const addr=document.getElementById('inputPostAddress').value.trim();
                const idx=document.getElementById('inputPostIndex').value.trim();
                if(!addr||addr.length<10){showError('errorPostAddress',!addr?'–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å':'–£–∫–∞–∂–∏—Ç–µ –ø–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å');document.getElementById('inputPostAddress').classList.add('error');ok=false;}
                if(!idx||idx.length<6){showError('errorPostIndex',!idx?'–í–≤–µ–¥–∏—Ç–µ –∏–Ω–¥–µ–∫—Å':'–ò–Ω–¥–µ–∫—Å ‚Äî 6 —Ü–∏—Ñ—Ä');document.getElementById('inputPostIndex').classList.add('error');ok=false;}
            }
            return ok;
        }

        // ===== –ö–û–†–ó–ò–ù–ê =====
        function loadCart() {
            try{const s=localStorage.getItem('artholst_cart');if(s) cart=JSON.parse(s);const sp=localStorage.getItem('artholst_promo');if(sp){const d=JSON.parse(sp);if(isPromoValid(d.code)){appliedPromo=d.code;discountPercent=d.discount;}}}catch(e){}
            updateCartBadge();
        }
        function saveCart() {
            try{localStorage.setItem('artholst_cart',JSON.stringify(cart));if(appliedPromo) localStorage.setItem('artholst_promo',JSON.stringify({code:appliedPromo,discount:discountPercent})); else localStorage.removeItem('artholst_promo');}catch(e){}
            updateCartBadge();
        }
        function updateCartBadge() { const b=document.getElementById('cartBadge'); b.textContent=cart.length; b.classList.toggle('hidden',cart.length===0); }

        function addToCart(i,btn) {
            const size=config.sizes[i];
            cart.push({id:Date.now(),size,packaging:false,comment:''});
            saveCart();
            btn.classList.add('pulse-effect','added'); btn.textContent='‚úì –î–æ–±–∞–≤–ª–µ–Ω–æ';
            const rect=btn.getBoundingClientRect();const ci=document.querySelector('.cart-icon');const cr=ci.getBoundingClientRect();
            const f=document.createElement('div');f.className='flying-item';f.textContent='üñºÔ∏è';
            f.style.cssText='left:'+(rect.left+rect.width/2-18)+'px;top:'+(rect.top-10)+'px;transition:all 0.4s cubic-bezier(0.2,0,0.2,1)';
            document.body.appendChild(f);
            requestAnimationFrame(()=>{f.style.left=cr.left+cr.width/2-18+'px';f.style.top=cr.top+'px';f.style.transform='scale(0.4)';f.style.opacity='0.5';});
            setTimeout(()=>f.remove(),400);
            setTimeout(()=>{btn.classList.remove('pulse-effect','added');btn.textContent='–í –∫–æ—Ä–∑–∏–Ω—É';},1500);
            haptic('medium');
            const badge=document.getElementById('cartBadge');badge.style.animation='none';setTimeout(()=>badge.style.animation='bounce 0.3s ease',10);
        }

        function removeFromCart(id){cart=cart.filter(x=>x.id!==id);saveCart();renderCart();haptic('light');}
        function clearCart(){cart=[];appliedPromo=null;discountPercent=0;saveCart();renderCart();}
        function togglePackaging(id){const x=cart.find(i=>i.id===id);if(x){x.packaging=!x.packaging;saveCart();renderCart();haptic('light');}}
        function updateComment(id,c){const x=cart.find(i=>i.id===id);if(x){x.comment=c;saveCart();}}

        function isPromoValid(code){if(code.toUpperCase()!=='–°–ï–ì–û–î–ù–Ø')return false;const d=new Date().getDay();return d===3||d===6;}
        function applyPromo() {
            const inp=document.getElementById('promoInput');const msg=document.getElementById('promoMessage');const code=inp.value.trim().toUpperCase();
            if(!code){msg.textContent='–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥';msg.className='promo-message error';return;}
            if(code==='–°–ï–ì–û–î–ù–Ø'){
                if(isPromoValid(code)){appliedPromo=code;discountPercent=10;saveCart();msg.textContent='‚úÖ –ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–º–µ–Ω—ë–Ω! –°–∫–∏–¥–∫–∞ 10%';msg.className='promo-message success';inp.disabled=true;renderCart();haptic('success');}
                else{msg.textContent='‚ùå –î–µ–π—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –≤ —Å—Ä–µ–¥—É –∏ —Å—É–±–±–æ—Ç—É';msg.className='promo-message error';haptic('error');}
            } else {msg.textContent='‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥';msg.className='promo-message error';haptic('error');}
        }

        function calcPostDelivery(){if(!cart.length)return 0;const p=cart.map(x=>x.size.delivery_price).sort((a,b)=>b-a);let t=p[0];for(let i=1;i<p.length;i++)t+=Math.round(p[i]*0.5);return t;}
        function isFreeDelivery(){return cart.reduce((s,x)=>s+x.size.price+(x.packaging?x.size.packaging_price:0),0)>=200;}

        function renderCart() {
            const c=document.getElementById('cartContent');
            if(!cart.length){c.innerHTML='<div class="cart-empty"><div class="cart-empty-icon">üõí</div><div class="cart-empty-text">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div><div class="cart-empty-subtext">–î–æ–±–∞–≤—å—Ç–µ –∫–∞—Ä—Ç–∏–Ω—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞</div><button class="add-to-cart-btn" style="max-width:220px;margin:0 auto" onclick="openHome()">–ö –∫–∞—Ç–∞–ª–æ–≥—É</button></div>';return;}
            let pt=0,pk=0;
            const ih=cart.map(x=>{pt+=x.size.price;if(x.packaging)pk+=x.size.packaging_price;
                return '<div class="cart-item"><div class="cart-item-delete" onclick="removeFromCart('+x.id+')"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/></svg></div><div class="cart-item-header"><div class="cart-item-preview"><span>üñºÔ∏è</span></div><div class="cart-item-info"><div class="cart-item-size">'+x.size.width+'√ó'+x.size.height+' —Å–º</div><div class="cart-item-price">'+x.size.price+' BYN</div></div></div><div class="packaging-toggle" onclick="togglePackaging('+x.id+')"><div><div class="packaging-label">üéÅ –ü–æ–¥–∞—Ä–æ—á–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞</div><div class="packaging-price">+'+x.size.packaging_price+' BYN</div></div><div class="toggle-switch '+(x.packaging?'active':'')+'"></div></div><textarea class="cart-item-comment" placeholder="–ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ —Ñ–æ—Ç–æ?" onchange="updateComment('+x.id+',this.value)">'+x.comment+'</textarea><div class="cart-item-photo-note">üìé –§–æ—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ –ø–æ—Å–ª–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è</div></div>';
            }).join('');
            const sub=pt+pk;const pd=appliedPromo?Math.round(sub*discountPercent/100):0;const bd=cart.length>=3?Math.round(pt*0.15):0;const tot=sub-pd-bd;
            c.innerHTML='<div class="cart-items">'+ih+'<button class="add-more-btn" onclick="openHome()">+ –î–æ–±–∞–≤–∏—Ç—å –µ—â—ë –∫–∞—Ä—Ç–∏–Ω—É</button><div class="promo-section-cart"><div class="promo-input-wrapper"><input type="text" class="promo-input" id="promoInput" placeholder="–ü—Ä–æ–º–æ–∫–æ–¥" value="'+(appliedPromo||'')+'" '+(appliedPromo?'disabled':'')+'><button class="promo-apply-btn" onclick="applyPromo()">OK</button></div><div class="promo-message '+(appliedPromo?'success':'')+'" id="promoMessage">'+(appliedPromo?'‚úÖ –ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–º–µ–Ω—ë–Ω! –°–∫–∏–¥–∫–∞ 10%':'–ü—Ä–æ–º–æ–∫–æ–¥ –°–ï–ì–û–î–ù–Ø ‚Äî —Å–∫–∏–¥–∫–∞ 10% –≤ —Å—Ä –∏ —Å–±')+'</div></div></div><div class="cart-summary"><div class="cart-summary-row"><span>–¢–æ–≤–∞—Ä—ã ('+cart.length+'):</span><span>'+pt+' BYN</span></div><div class="cart-summary-row"><span>–£–ø–∞–∫–æ–≤–∫–∞:</span><span>'+pk+' BYN</span></div>'+(pd>0?'<div class="cart-summary-row discount"><span>–ü—Ä–æ–º–æ–∫–æ–¥ -'+discountPercent+'%:</span><span>-'+pd+' BYN</span></div>':'')+(bd>0?'<div class="cart-summary-row discount"><span>–°–∫–∏–¥–∫–∞ 15% (3+):</span><span>-'+bd+' BYN</span></div>':'')+'<div class="cart-summary-total"><span>–ò—Ç–æ–≥–æ:</span><span>'+tot+' BYN</span></div><button class="checkout-btn" onclick="openCheckout()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button></div>';
        }

        // ===== –ù–ê–í–ò–ì–ê–¶–ò–Ø =====
        function openHome(){document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));document.getElementById('homePage').classList.add('active');window.scrollTo(0,0);}
        function openCart(){document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));document.getElementById('cartPage').classList.add('active');renderCart();window.scrollTo(0,0);}
        function openCheckout(){if(!cart.length)return;document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));document.getElementById('checkoutPage').classList.add('active');currentStep=1;selectedDelivery=null;updateProgressBar();showStep(1);updateDeliveryPrices();window.scrollTo(0,0);}
        function goBackCheckout(){if(currentStep>1){currentStep--;updateProgressBar();showStep(currentStep);window.scrollTo(0,0);}else openCart();}

        // ===== –î–û–°–¢–ê–í–ö–ê =====
        function updateDeliveryPrices(){
            const free=isFreeDelivery();
            const ce=document.getElementById('courierPrice');
            if(free){ce.textContent='–ë–ï–°–ü–õ–ê–¢–ù–û';ce.classList.add('free');}else{ce.textContent=(selectedZone==='mkad'?15:20)+' BYN';ce.classList.remove('free');}
            const pe=document.getElementById('postPrice');
            if(free){pe.textContent='–ë–ï–°–ü–õ–ê–¢–ù–û';pe.classList.add('free');}else{pe.textContent=calcPostDelivery()+' BYN';pe.classList.remove('free');}
        }
        function selectZone(z,e){e.stopPropagation();selectedZone=z;document.querySelectorAll('.delivery-zone-btn').forEach(b=>b.classList.remove('active'));e.currentTarget.classList.add('active');updateDeliveryPrices();haptic('light');}
        function getDeliveryPrice(){if(isFreeDelivery())return 0;if(selectedDelivery==='courier')return selectedZone==='mkad'?15:20;if(selectedDelivery==='post')return calcPostDelivery();return 0;}

        // ===== –û–§–û–†–ú–õ–ï–ù–ò–ï =====
        function updateProgressBar(){for(let i=1;i<=3;i++){const s=document.getElementById('step'+i);const l=document.getElementById('line'+(i-1));s.classList.remove('active','completed');if(i<currentStep){s.classList.add('completed');s.textContent='‚úì';}else if(i===currentStep){s.classList.add('active');s.textContent=i;}else s.textContent=i;if(l)l.classList.toggle('active',i<=currentStep);}}
        function showStep(s){document.querySelectorAll('.checkout-step').forEach(x=>x.classList.remove('active'));document.getElementById('checkoutStep'+s).classList.add('active');window.scrollTo(0,0);}
        function goToStep(s){currentStep=s;updateProgressBar();showStep(s);}

        function goToStep2(){if(!validateStep1()){haptic('error');return;}currentStep=2;updateProgressBar();showStep(2);updateDeliveryPrices();}
        function selectDelivery(t){selectedDelivery=t;document.querySelectorAll('.delivery-option').forEach(o=>o.classList.toggle('selected',o.dataset.type===t));document.getElementById('deliveryError').classList.remove('visible');updateDeliveryPrices();haptic('light');}
        function goToStep3(){if(!validateStep2()){haptic('error');return;}fillConfirmation();currentStep=3;updateProgressBar();showStep(3);}

        function fillConfirmation() {
            document.getElementById('confirmOrder').innerHTML=cart.map((x,i)=>(i+1)+'. '+x.size.width+'√ó'+x.size.height+' —Å–º ‚Äî '+x.size.price+' BYN'+(x.packaging?' + üéÅ':'')).join('<br>');
            document.getElementById('confirmContacts').innerHTML=document.getElementById('inputName').value+'<br>'+document.getElementById('inputPhone').value;
            let dh='',dp=getDeliveryPrice(),free=isFreeDelivery();
            if(selectedDelivery==='courier'){const zt=selectedZone==='mkad'?'–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –ú–ö–ê–î':'–∑–∞ –ú–ö–ê–î';dh='üöó –ö—É—Ä—å–µ—Ä ('+zt+')<br>'+document.getElementById('inputStreet').value+', –¥. '+document.getElementById('inputHouse').value;const a=document.getElementById('inputApartment').value;if(a)dh+=', –∫–≤. '+a;}
            else if(selectedDelivery==='pickup') dh='üìç –°–∞–º–æ–≤—ã–≤–æ–∑<br>–≥. –ú–∏–Ω—Å–∫, —Ä–∞–π–æ–Ω –ú–∏–Ω—Å–∫ –ú–∏—Ä';
            else if(selectedDelivery==='post') dh='üìÆ –ë–µ–ª–ø–æ—á—Ç–∞<br>'+document.getElementById('inputPostAddress').value+'<br>–ò–Ω–¥–µ–∫—Å: '+document.getElementById('inputPostIndex').value;
            document.getElementById('confirmDelivery').innerHTML=dh;
            const pt=cart.reduce((s,x)=>s+x.size.price,0);const pk=cart.reduce((s,x)=>s+(x.packaging?x.size.packaging_price:0),0);
            const pd=appliedPromo?Math.round((pt+pk)*discountPercent/100):0;const bd=cart.length>=3?Math.round(pt*0.15):0;const td=pd+bd;const tot=pt+pk+dp-td;const pp=Math.ceil(tot/2);
            document.getElementById('confirmProducts').textContent=pt+' BYN';
            document.getElementById('confirmPackaging').textContent=pk+' BYN';
            document.getElementById('confirmDeliveryPrice').textContent=free?'–ë–ï–°–ü–õ–ê–¢–ù–û':dp+' BYN';
            const dr=document.getElementById('confirmDiscountRow');if(td>0){dr.style.display='flex';document.getElementById('confirmDiscount').textContent='-'+td+' BYN';}else dr.style.display='none';
            document.getElementById('confirmTotal').textContent=tot+' BYN';
            document.getElementById('confirmPrepay').textContent=pp+' BYN';
            document.getElementById('confirmOnDelivery').textContent=(tot-pp)+' BYN';
        }

        function launchConfetti(){const cols=['#FF6B35','#FF8C42','#7C3AED','#A855F7','#F59E0B','#10B981'];for(let i=0;i<50;i++){const p=document.createElement('div');p.className='confetti-piece';p.style.left=Math.random()*100+'vw';p.style.top='-10px';p.style.width=(Math.random()*8+4)+'px';p.style.height=(Math.random()*8+4)+'px';p.style.background=cols[Math.floor(Math.random()*cols.length)];p.style.borderRadius=Math.random()>0.5?'50%':'2px';p.style.animationDuration=(Math.random()*2+1.5)+'s';p.style.animationDelay=(Math.random()*0.5)+'s';document.body.appendChild(p);setTimeout(()=>p.remove(),4000);}}

        function submitOrder() {
            const oid=Math.floor(10000+Math.random()*90000);const name=document.getElementById('inputName').value;const phone=document.getElementById('inputPhone').value;
            let dt='',dp=getDeliveryPrice(),free=isFreeDelivery();
            if(selectedDelivery==='courier'){const zt=selectedZone==='mkad'?'–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –ú–ö–ê–î':'–∑–∞ –ú–ö–ê–î –¥–æ 5 –∫–º';dt='–ö—É—Ä—å–µ—Ä –ø–æ –ú–∏–Ω—Å–∫—É ('+zt+')\n'+document.getElementById('inputStreet').value+', –¥. '+document.getElementById('inputHouse').value+', –∫–≤. '+document.getElementById('inputApartment').value+', –ø–æ–¥—ä–µ–∑–¥ '+document.getElementById('inputEntrance').value+', —ç—Ç–∞–∂ '+document.getElementById('inputFloor').value;}
            else if(selectedDelivery==='pickup') dt='–°–∞–º–æ–≤—ã–≤–æ–∑ (–≥. –ú–∏–Ω—Å–∫, —Ä–∞–π–æ–Ω –ú–∏–Ω—Å–∫ –ú–∏—Ä)';
            else if(selectedDelivery==='post') dt='–ë–µ–ª–ø–æ—á—Ç–∞\n'+document.getElementById('inputPostAddress').value+', –∏–Ω–¥–µ–∫—Å: '+document.getElementById('inputPostIndex').value;
            const pt=cart.reduce((s,x)=>s+x.size.price,0);const pk=cart.reduce((s,x)=>s+(x.packaging?x.size.packaging_price:0),0);
            const pd=appliedPromo?Math.round((pt+pk)*discountPercent/100):0;const bd=cart.length>=3?Math.round(pt*0.15):0;const tot=pt+pk+dp-pd-bd;const pp=Math.ceil(tot/2);
            const items=cart.map((x,i)=>(i+1)+'Ô∏è‚É£ '+x.size.width+'√ó'+x.size.height+' —Å–º ‚Äî '+x.size.price+' BYN\n   üéÅ –£–ø–∞–∫–æ–≤–∫–∞: '+(x.packaging?'–î–∞ (+'+x.size.packaging_price+' BYN)':'–ù–µ—Ç')+'\n   üí¨ '+(x.comment||'‚Äî')).join('\n\n');
            const uid=tg&&tg.initDataUnsafe&&tg.initDataUnsafe.user?tg.initDataUnsafe.user.id:'‚Äî';
            const uname=tg&&tg.initDataUnsafe&&tg.initDataUnsafe.user?tg.initDataUnsafe.user.username:'‚Äî';
            let msg='üé® –ù–û–í–´–ô –ó–ê–ö–ê–ó #'+oid+'\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nüë§ –ö–õ–ò–ï–ù–¢\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n–§–ò–û: '+name+'\n–¢–µ–ª–µ—Ñ–æ–Ω: '+phone+'\nTelegram ID: '+uid+'\nUsername: @'+uname+'\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nüì¶ –ó–ê–ö–ê–ó\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n'+items+'\n\n';
            if(appliedPromo) msg+='‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nüè∑ –ü–†–û–ú–û–ö–û–î\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n–ü—Ä–æ–º–æ–∫–æ–¥: '+appliedPromo+'\n–°–∫–∏–¥–∫–∞: '+discountPercent+'% (-'+pd+' BYN)\n\n';
            msg+='‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nüöö –î–û–°–¢–ê–í–ö–ê\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n'+dt+'\n–°—Ç–æ–∏–º–æ—Å—Ç—å: '+(free?'–ë–ï–°–ü–õ–ê–¢–ù–û':dp+' BYN')+'\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nüí∞ –†–ê–°–ß–Å–¢\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n–¢–æ–≤–∞—Ä—ã: '+pt+' BYN\n–£–ø–∞–∫–æ–≤–∫–∞: '+pk+' BYN\n–î–æ—Å—Ç–∞–≤–∫–∞: '+(free?'–ë–ï–°–ü–õ–ê–¢–ù–û':dp+' BYN')+'\n';
            if(pd>0) msg+='–ü—Ä–æ–º–æ–∫–æ–¥ -'+discountPercent+'%: -'+pd+' BYN\n';
            if(bd>0) msg+='–°–∫–∏–¥–∫–∞ 15% (3+): -'+bd+' BYN\n';
            msg+='‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n–ò–¢–û–ì–û: '+tot+' BYN\n\nüí≥ –ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ 50%: '+pp+' BYN\nüíµ –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏: '+(tot-pp)+' BYN\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n‚è∞ '+new Date().toLocaleString('ru-RU')+'\nüì∏ –û–∂–∏–¥–∞–µ–º —Ñ–æ—Ç–æ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞';
            try{if(tg) tg.sendData(msg);}catch(e){console.log('–ó–∞–∫–∞–∑:',msg);}
            document.getElementById('successOrderId').textContent='–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞: #'+oid;
            document.getElementById('successOverlay').classList.add('active');
            launchConfetti();
            cart=[];appliedPromo=null;discountPercent=0;saveCart();haptic('success');
        }
        function backToHome(){document.getElementById('successOverlay').classList.remove('active');openHome();}

        // ===== SPLASH SCREEN =====
        function initSplash() {
            function splashHaptic(type) {
                try {
                    var t = window.Telegram && window.Telegram.WebApp;
                    if (t && t.HapticFeedback) {
                        if (['light','medium','heavy','rigid','soft'].indexOf(type) >= 0) {
                            t.HapticFeedback.impactOccurred(type);
                        } else {
                            t.HapticFeedback.notificationOccurred(type);
                        }
                    }
                } catch(e) {}
            }

            function createFragments(stage) {
                var frags = [
                    { x: -90, y: -110, r: -50, color: '#FF6B35', w: 55, h: 45 },
                    { x: 95, y: -100, r: 40, color: '#FF8C42', w: 50, h: 50 },
                    { x: -100, y: 70, r: -35, color: '#FF7A45', w: 60, h: 40 },
                    { x: 85, y: 80, r: 45, color: '#FF6B35', w: 55, h: 48 },
                    { x: -50, y: -130, r: -65, color: '#FF9855', w: 40, h: 25 },
                    { x: 60, y: -125, r: 60, color: '#FF7A45', w: 45, h: 22 },
                    { x: 0, y: 110, r: 20, color: '#FF8C42', w: 50, h: 30 },
                    { x: -120, y: -20, r: -25, color: '#F59E0B', w: 30, h: 18 },
                    { x: 125, y: 10, r: 30, color: '#FFD700', w: 28, h: 16 },
                    { x: -30, y: 120, r: -15, color: '#F59E0B', w: 35, h: 14 },
                ];
                frags.forEach(function(f, i) {
                    var el = document.createElement('div');
                    el.className = 'splash-fragment';
                    el.style.cssText = 'width:' + f.w + 'px;height:' + f.h + 'px;' +
                        'background:' + f.color + ';left:50%;top:50%;' +
                        'transform:translate(-50%,-50%) scale(1) rotate(0deg);' +
                        'transition:all ' + (0.45 + Math.random()*0.2) + 's cubic-bezier(0.2,0.6,0.3,1) ' + (i*0.015) + 's;' +
                        'opacity:1;border-radius:' + (Math.random()>0.5 ? '6px' : '3px') + ';';
                    stage.appendChild(el);
                    requestAnimationFrame(function() {
                        requestAnimationFrame(function() {
                            el.style.transform = 'translate(calc(-50% + ' + f.x + 'px), calc(-50% + ' + f.y + 'px)) scale(0.2) rotate(' + f.r + 'deg)';
                            el.style.opacity = '0';
                        });
                    });
                });
            }

            function createConfettiBurst(stage) {
                var colors = ['#FF6B35','#FF8C42','#7C3AED','#A855F7','#F59E0B','#FFD700','#10B981','#EF4444','#FFFFFF','#60A5FA'];
                for (var i = 0; i < 50; i++) {
                    var c = document.createElement('div');
                    c.className = 'splash-confetti';
                    var size = Math.random() * 10 + 4;
                    var angle = (Math.PI * 2 * i) / 50 + (Math.random() - 0.5) * 0.6;
                    var dist = Math.random() * 180 + 60;
                    var tx = Math.cos(angle) * dist;
                    var ty = Math.sin(angle) * dist;
                    var color = colors[Math.floor(Math.random() * colors.length)];
                    var isCircle = Math.random() > 0.6;
                    var isStar = !isCircle && Math.random() > 0.7;
                    if (isStar) {
                        c.textContent = ['‚ú®','‚≠ê','üåü','üí´'][Math.floor(Math.random()*4)];
                        c.style.cssText = 'font-size:' + (Math.random()*12+8) + 'px;' +
                            'left:50%;top:50%;' +
                            'transform:translate(-50%,-50%) scale(0);' +
                            'transition:all ' + (Math.random()*0.5+0.3) + 's cubic-bezier(0.2,0.6,0.35,1) ' + (Math.random()*0.12) + 's;opacity:1;';
                    } else {
                        c.style.cssText = 'width:' + size + 'px;height:' + (isCircle ? size : size*0.5) + 'px;' +
                            'background:' + color + ';border-radius:' + (isCircle ? '50%' : '2px') + ';' +
                            'left:50%;top:50%;' +
                            'transform:translate(-50%,-50%) scale(0);' +
                            'transition:all ' + (Math.random()*0.5+0.3) + 's cubic-bezier(0.2,0.6,0.35,1) ' + (Math.random()*0.12) + 's;opacity:1;';
                    }
                    stage.appendChild(c);
                    (function(el, x, y) {
                        requestAnimationFrame(function() {
                            requestAnimationFrame(function() {
                                el.style.transform = 'translate(calc(-50% + ' + x + 'px), calc(-50% + ' + y + 'px)) scale(1) rotate(' + (Math.random()*720-360) + 'deg)';
                                el.style.opacity = '0';
                            });
                        });
                    })(c, tx, ty);
                }
            }

            var gift = document.getElementById('splashGift');
            var painting = document.getElementById('splashPainting');
            var logo = document.getElementById('splashLogo');
            var tagline = document.getElementById('splashTagline');
            var glow = document.getElementById('splashGlow');
            var shockwave = document.getElementById('splashShockwave');
            var stage = document.getElementById('splashStage');

            setTimeout(function() { if (glow) glow.classList.add('show'); }, 600);

            setTimeout(function() {
                if (gift) { gift.style.animation = 'none'; void gift.offsetWidth; gift.classList.add('shake'); }
                splashHaptic('heavy');
            }, 1100);
            setTimeout(function() { splashHaptic('rigid'); }, 1250);
            setTimeout(function() { splashHaptic('heavy'); }, 1400);
            setTimeout(function() { splashHaptic('rigid'); }, 1550);
            setTimeout(function() { splashHaptic('heavy'); }, 1700);
            setTimeout(function() { splashHaptic('rigid'); }, 1850);
            setTimeout(function() { splashHaptic('heavy'); }, 1950);
            setTimeout(function() { splashHaptic('rigid'); }, 2000);

            setTimeout(function() {
                if (gift) gift.style.display = 'none';
                if (shockwave) shockwave.classList.add('active');
                createFragments(stage);
                createConfettiBurst(stage);
                splashHaptic('heavy');
                setTimeout(function() { splashHaptic('heavy'); }, 50);
                setTimeout(function() { splashHaptic('rigid'); }, 100);
            }, 2100);

            setTimeout(function() {
                if (painting) painting.classList.add('reveal');
                splashHaptic('success');
            }, 2400);

            setTimeout(function() {
                if (logo) logo.classList.add('show');
                if (tagline) tagline.classList.add('show');
                splashHaptic('light');
            }, 3100);

            setTimeout(function() {
                var splash = document.getElementById('splashScreen');
                if (splash) {
                    splash.classList.add('hide');
                    setTimeout(function() { splash.remove(); }, 600);
                }
            }, 4300);
        }
        initSplash();
        loadConfig();
    </script>
</body>
</html>
